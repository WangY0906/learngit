2018-11-30 13:50:17,630 INFO disTf.py:30 start ...
2018-11-30 13:50:17,707 INFO disTf.py:21 service start ...
2018-11-30 13:50:22,334 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 13:50:22,334 INFO train_handler.py:152 parse data: {'file': '/tmp/mnist.tgz', 'data': 'notebooks/MNIST_data', 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}, 'resource': {'cpu': 2, 'gpu': 1, 'mem': '4g'}}
2018-11-30 13:50:22,704 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d392c086-f463-11e8-98d1-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d392c086-f463-11e8-98d1-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 15:57:57,079 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 15:57:57,083 INFO train_handler.py:152 parse data: {'file': '/tmp/mnist.tgz', 'data': 'notebooks/MNIST_data', 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}, 'resource': {'cpu': 2, 'gpu': 1, 'mem': '4g'}}
2018-11-30 15:57:57,454 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a628a81e-f475-11e8-883e-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a628a81e-f475-11e8-883e-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:06:19,067 INFO disTf.py:30 start ...
2018-11-30 16:06:19,114 INFO disTf.py:21 service start ...
2018-11-30 16:06:23,233 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 16:06:23,234 INFO train_handler.py:153 parse data: {'file': '/tmp/mnist.tgz', 'type': 'tensorflow', 'data': 'notebooks/MNIST_data', 'resource': {'gpu': 1, 'cpu': 2, 'mem': '4g'}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-30 16:06:23,453 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d3d91fe8-f476-11e8-9149-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d3d91fe8-f476-11e8-9149-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:08:34,446 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 16:08:34,446 INFO train_handler.py:153 parse data: {'file': '/tmp/mnist.tgz', 'type': 'tensorflow', 'data': 'notebooks/MNIST_data', 'resource': {'gpu': 1, 'cpu': 2, 'mem': '4g'}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-30 16:08:34,464 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-220e7e08-f477-11e8-be34-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-220e7e08-f477-11e8-be34-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:11:57,024 INFO disTf.py:30 start ...
2018-11-30 16:11:57,024 INFO disTf.py:21 service start ...
2018-11-30 16:11:59,900 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 16:11:59,901 INFO train_handler.py:153 parse data: {'data': 'notebooks/MNIST_data', 'detail': {'worker': 2, 'ps': 1}, 'resource': {'gpu': 1, 'mem': '4g', 'cpu': 2}, 'file': '/tmp/mnist.tgz', 'type': 'tensorflow'}
2018-11-30 16:11:59,940 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c8471ac-f477-11e8-aee0-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c8471ac-f477-11e8-aee0-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:17:31,030 INFO disTf.py:30 start ...
2018-11-30 16:17:31,092 INFO disTf.py:21 service start ...
2018-11-30 16:17:42,568 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 16:17:42,568 INFO train_handler.py:153 parse data: {'data': 'notebooks/MNIST_data', 'resource': {'cpu': 2, 'gpu': 1, 'mem': '4g'}, 'detail': {'worker': 2, 'ps': 1}, 'type': 'tensorflow', 'file': '/tmp/mnist.tgz'}
2018-11-30 16:17:42,849 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-68c345c2-f478-11e8-829a-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-68c345c2-f478-11e8-829a-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:30:54,435 INFO disTf.py:30 start ...
2018-11-30 16:30:54,528 INFO disTf.py:21 service start ...
2018-11-30 16:30:57,928 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 16:30:57,929 INFO train_handler.py:153 parse data: {'type': 'tensorflow', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'worker': 2, 'ps': 1}, 'data': 'notebooks/MNIST_data', 'file': '/tmp/mnist.tgz'}
2018-11-30 16:30:58,071 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:30:59,296 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 22, 30, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467494',
              'self_link': '/api/v1/namespaces/default/services/tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
              'uid': '14883783-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:30:59,296 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:30:59,467 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 22, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467496',
              'self_link': '/api/v1/namespaces/default/services/tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
              'uid': '14b79f03-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:30:59,467 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:30:59,749 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 22, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467498',
              'self_link': '/api/v1/namespaces/default/services/tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
              'uid': '14dfc945-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:30:59,827 INFO train_handler.py:104 ps: ['tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1:2222']
2018-11-30 16:30:59,827 INFO train_handler.py:106 worker: ['tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2:2222', 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2:2222']
2018-11-30 16:31:00,552 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 22, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '1560cfee-f479-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
                         'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2'},
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467502',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
              'uid': '1560cfee-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '1560cfee-f479-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '1560cfee-f479-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1:2222',
                                                            'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2:2222,tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:31:00,766 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 22, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '1581116b-f479-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
                         'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2'},
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467509',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
              'uid': '1581116b-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '1581116b-f479-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '1581116b-f479-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1:2222',
                                                            'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2:2222,tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:31:00,977 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 22, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '15a13a1d-f479-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
                         'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1'},
              'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467516',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
              'uid': '15a13a1d-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '15a13a1d-f479-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '15a13a1d-f479-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1:2222',
                                                            'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-0-2:2222,tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-42d5d700-f47a-11e8-9e5c-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:32:14,280 INFO disTf.py:30 start ...
2018-11-30 16:32:14,280 INFO disTf.py:21 service start ...
2018-11-30 16:32:17,683 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 16:32:17,684 INFO train_handler.py:153 parse data: {'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'data': 'notebooks/MNIST_data', 'file': '/tmp/mnist.tgz', 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}}
2018-11-30 16:32:17,724 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:32:18,508 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 23, 50, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467646',
              'self_link': '/api/v1/namespaces/default/services/tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
              'uid': '43d438b8-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:32:18,617 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:32:18,820 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 23, 50, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467648',
              'self_link': '/api/v1/namespaces/default/services/tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
              'uid': '4403c38e-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:32:18,820 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:32:19,084 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 23, 50, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467651',
              'self_link': '/api/v1/namespaces/default/services/tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
              'uid': '442c141b-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:32:19,150 INFO train_handler.py:104 ps: ['tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1:2222']
2018-11-30 16:32:19,150 INFO train_handler.py:106 worker: ['tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2:2222', 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2:2222']
2018-11-30 16:32:19,889 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 23, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '44a97c21-f479-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
                         'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2'},
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467654',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
              'uid': '44a97c21-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '44a97c21-f479-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '44a97c21-f479-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1:2222',
                                                            'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2:2222,tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:32:20,096 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 23, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '44c97a70-f479-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
                         'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2'},
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467661',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
              'uid': '44c97a70-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '44c97a70-f479-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '44c97a70-f479-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1:2222',
                                                            'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2:2222,tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:32:20,305 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 23, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '44e9a007-f479-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
                         'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1'},
              'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10467669',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
              'uid': '44e9a007-f479-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '44e9a007-f479-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '44e9a007-f479-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1:2222',
                                                            'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-0-2:2222,tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-725f63fa-f47a-11e8-a2e0-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:48:09,958 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-11-30 16:48:09,959 INFO train_handler.py:153 parse data: {'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'data': 'notebooks/MNIST_data', 'file': '/tmp/mnist.tgz', 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}}
2018-11-30 16:48:09,976 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:48:10,730 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 39, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10469061',
              'self_link': '/api/v1/namespaces/default/services/tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
              'uid': '7b60de18-f47b-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:48:10,730 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:48:10,930 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 39, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10469063',
              'self_link': '/api/v1/namespaces/default/services/tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
              'uid': '7b879087-f47b-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:48:10,933 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-30 16:48:11,130 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 39, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10469065',
              'self_link': '/api/v1/namespaces/default/services/tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
              'uid': '7b9f794b-f47b-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-30 16:48:11,202 INFO train_handler.py:104 ps: ['tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1:2222']
2018-11-30 16:48:11,202 INFO train_handler.py:106 worker: ['tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2:2222', 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2:2222']
2018-11-30 16:48:12,008 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 39, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7c2862a6-f47b-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
                         'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2'},
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10469069',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
              'uid': '7c2862a6-f47b-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7c2862a6-f47b-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7c2862a6-f47b-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1:2222',
                                                            'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2:2222,tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:48:12,234 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 39, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7c48a5f5-f47b-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
                         'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2'},
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10469076',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
              'uid': '7c48a5f5-f47b-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7c48a5f5-f47b-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7c48a5f5-f47b-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1:2222',
                                                            'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2:2222,tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-30 16:48:12,453 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 30, 8, 39, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7c68e7a5-f47b-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
                         'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1'},
              'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10469084',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
              'uid': '7c68e7a5-f47b-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7c68e7a5-f47b-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7c68e7a5-f47b-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1:2222',
                                                            'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-0-2:2222,tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a9f9262c-f47c-11e8-b6b1-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:20:04,977 INFO disTf.py:30 start ...
2018-12-01 14:20:05,032 INFO disTf.py:21 service start ...
2018-12-01 14:20:10,426 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-01 14:20:10,427 INFO train_handler.py:153 parse data: {'data': 'notebooks/MNIST_data', 'type': 'tensorflow', 'resource': {'mem': '4g', 'gpu': 1, 'cpu': 2}, 'detail': {'worker': 2, 'ps': 1}, 'file': '/tmp/mnist.tgz'}
2018-12-01 14:20:10,468 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-27c5d174-f531-11e8-a773-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-27c5d174-f531-11e8-a773-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:23:42,038 INFO disTf.py:30 start ...
2018-12-01 14:23:42,038 INFO disTf.py:21 service start ...
2018-12-01 14:23:44,771 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-01 14:23:44,771 INFO train_handler.py:153 parse data: {'resource': {'gpu': 1, 'cpu': 2, 'mem': '4g'}, 'type': 'tensorflow', 'data': 'notebooks/MNIST_data', 'file': '/tmp/mnist.tgz', 'detail': {'ps': 1, 'worker': 2}}
2018-12-01 14:23:44,850 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a78818b4-f531-11e8-974e-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a78818b4-f531-11e8-974e-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:24:48,744 INFO disTf.py:30 start ...
2018-12-01 14:24:48,744 INFO disTf.py:21 service start ...
2018-12-01 14:24:50,595 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-01 14:24:50,595 INFO train_handler.py:153 parse data: {'file': '/tmp/mnist.tgz', 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}, 'data': 'notebooks/MNIST_data', 'resource': {'cpu': 2, 'gpu': 1, 'mem': '4g'}}
2018-12-01 14:24:50,671 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:24:50,834 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 23, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5941893',
              'self_link': '/api/v1/namespaces/default/services/tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
              'uid': 'a00aee66-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:24:50,834 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:24:50,834 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 23, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5941895',
              'self_link': '/api/v1/namespaces/default/services/tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
              'uid': 'a01bc407-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:24:50,834 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:24:50,850 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 23, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5941897',
              'self_link': '/api/v1/namespaces/default/services/tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
              'uid': 'a01d7396-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:24:50,923 INFO train_handler.py:104 ps: ['tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1:2222']
2018-12-01 14:24:50,924 INFO train_handler.py:106 worker: ['tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2:2222', 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2:2222']
2018-12-01 14:24:50,962 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 23, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a02c4e08-f531-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
                         'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2'},
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5941899',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
              'uid': 'a02c4e08-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a02c4e08-f531-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a02c4e08-f531-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1:2222',
                                                            'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2:2222,tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:24:50,993 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 23, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a02fe764-f531-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
                         'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2'},
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5941902',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
              'uid': 'a02fe764-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a02fe764-f531-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a02fe764-f531-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1:2222',
                                                            'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2:2222,tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:24:51,085 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 23, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a03516de-f531-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
                         'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1'},
              'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5941908',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
              'uid': 'a03516de-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a03516de-f531-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a03516de-f531-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1:2222',
                                                            'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-0-2:2222,tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cec40ee6-f531-11e8-aabb-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:26:57,086 INFO disTf.py:30 start ...
2018-12-01 14:26:57,086 INFO disTf.py:21 service start ...
2018-12-01 14:26:59,405 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-01 14:26:59,406 INFO train_handler.py:153 parse data: {'resource': {'mem': '4g', 'cpu': 2, 'gpu': 1}, 'type': 'tensorflow', 'file': '/tmp/mnist.tgz', 'data': 'notebooks/MNIST_data', 'detail': {'worker': 2, 'ps': 1}}
2018-12-01 14:26:59,461 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:26:59,484 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 25, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942178',
              'self_link': '/api/v1/namespaces/default/services/tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
              'uid': 'ecc80f78-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:26:59,487 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:26:59,493 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 25, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942179',
              'self_link': '/api/v1/namespaces/default/services/tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
              'uid': 'ecc9df15-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:26:59,497 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:26:59,509 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 25, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942182',
              'self_link': '/api/v1/namespaces/default/services/tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
              'uid': 'eccb695c-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:26:59,575 INFO train_handler.py:104 ps: ['tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1:2222']
2018-12-01 14:26:59,576 INFO train_handler.py:106 worker: ['tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2:2222', 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2:2222']
2018-12-01 14:26:59,617 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 25, 41, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ecdad411-f531-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
                         'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2'},
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942184',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
              'uid': 'ecdad411-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ecdad411-f531-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ecdad411-f531-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1:2222',
                                                            'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2:2222,tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:26:59,673 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 25, 41, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ece1c0e7-f531-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
                         'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2'},
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942190',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
              'uid': 'ece1c0e7-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ece1c0e7-f531-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ece1c0e7-f531-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1:2222',
                                                            'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2:2222,tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:26:59,744 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 25, 41, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ece866b9-f531-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
                         'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1'},
              'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942194',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
              'uid': 'ece866b9-f531-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ece866b9-f531-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ece866b9-f531-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1:2222',
                                                            'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-0-2:2222,tf-1b8b1562-f532-11e8-901b-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-1b8b1562-f532-11e8-901b-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:31:42,987 INFO disTf.py:30 start ...
2018-12-01 14:31:42,990 INFO disTf.py:21 service start ...
2018-12-01 14:31:47,476 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-01 14:31:47,476 INFO train_handler.py:153 parse data: {'type': 'tensorflow', 'file': '/tmp/mnist.tgz', 'data': 'notebooks/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-01 14:31:47,514 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:31:47,546 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 30, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942816',
              'self_link': '/api/v1/namespaces/default/services/tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
              'uid': '987a71f1-f532-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:31:47,548 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:31:47,577 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 30, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942818',
              'self_link': '/api/v1/namespaces/default/services/tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
              'uid': '987c84d7-f532-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:31:47,580 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 14:31:47,621 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 30, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942820',
              'self_link': '/api/v1/namespaces/default/services/tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
              'uid': '98814275-f532-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 14:31:47,715 INFO train_handler.py:104 ps: ['tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1:2222']
2018-12-01 14:31:47,715 INFO train_handler.py:106 worker: ['tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2:2222', 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2:2222']
2018-12-01 14:31:47,766 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 30, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '989ad0f2-f532-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
                         'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1'},
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942823',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
              'uid': '989ad0f2-f532-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '989ad0f2-f532-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '989ad0f2-f532-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1:2222',
                                                            'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2:2222,tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:31:47,804 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 30, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '989f3348-f532-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
                         'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2'},
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942825',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
              'uid': '989f3348-f532-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '989f3348-f532-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '989f3348-f532-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1:2222',
                                                            'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2:2222,tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 14:31:47,849 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 6, 30, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '98a6be92-f532-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
                         'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2'},
              'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5942833',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
              'uid': '98a6be92-f532-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '98a6be92-f532-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '98a6be92-f532-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-c73f06de-f532-11e8-9392-08d40cb2834b-ps-0-1:2222',
                                                            'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-0-2:2222,tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c73f06de-f532-11e8-9392-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 15:29:16,678 INFO disTf.py:30 start ...
2018-12-01 15:29:16,694 INFO disTf.py:21 service start ...
2018-12-01 15:29:20,533 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-01 15:29:20,534 INFO train_handler.py:153 parse data: {'file': '/tmp/mnist.tgz', 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}, 'data': 'notebooks/MNIST_data', 'resource': {'gpu': 1, 'cpu': 2, 'mem': '4g'}}
2018-12-01 15:29:20,608 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 15:29:20,633 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 28, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5948859',
              'self_link': '/api/v1/namespaces/default/services/tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
              'uid': 'a30f48b6-f53a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 15:29:20,636 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 15:29:20,666 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 28, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5948860',
              'self_link': '/api/v1/namespaces/default/services/tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
              'uid': 'a3111844-f53a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 15:29:20,669 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 15:29:20,677 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 28, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5948862',
              'self_link': '/api/v1/namespaces/default/services/tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
              'uid': 'a3160081-f53a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 15:29:20,710 INFO train_handler.py:104 ps: ['tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1:2222']
2018-12-01 15:29:20,710 INFO train_handler.py:106 worker: ['tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2:2222', 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2:2222']
2018-12-01 15:29:20,745 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 28, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a31f30f6-f53a-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
                         'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2'},
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5948865',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
              'uid': 'a31f30f6-f53a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a31f30f6-f53a-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a31f30f6-f53a-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1:2222',
                                                            'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2:2222,tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 15:29:20,797 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 28, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a323725b-f53a-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
                         'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2'},
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5948867',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
              'uid': 'a323725b-f53a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a323725b-f53a-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a323725b-f53a-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1:2222',
                                                            'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2:2222,tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 15:29:20,824 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 28, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a32b1f7b-f53a-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
                         'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1'},
              'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5948871',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
              'uid': 'a32b1f7b-f53a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a32b1f7b-f53a-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a32b1f7b-f53a-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1:2222',
                                                            'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-0-2:2222,tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d16dc46e-f53a-11e8-b968-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 15:47:16,088 INFO disTf.py:30 start ...
2018-12-01 15:47:16,193 INFO disTf.py:21 service start ...
2018-12-01 15:47:24,915 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-01 15:47:24,915 INFO train_handler.py:153 parse data: {'detail': {'worker': 2, 'ps': 1}, 'type': 'tensorflow', 'data': 'notebooks/MNIST_data', 'resource': {'mem': '4g', 'cpu': 2, 'gpu': 1}, 'file': '/tmp/mnist.tgz'}
2018-12-01 15:47:25,014 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 15:47:25,214 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 46, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5950826',
              'self_link': '/api/v1/namespaces/default/services/tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
              'uid': '2971ae89-f53d-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 15:47:25,218 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 15:47:25,263 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 46, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5950828',
              'self_link': '/api/v1/namespaces/default/services/tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
              'uid': '2986486b-f53d-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 15:47:25,266 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-01 15:47:25,287 INFO train_handler.py:56 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 46, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5950830',
              'self_link': '/api/v1/namespaces/default/services/tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
              'uid': '298dd9d3-f53d-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-01 15:47:25,316 INFO train_handler.py:104 ps: ['tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1:2222']
2018-12-01 15:47:25,316 INFO train_handler.py:106 worker: ['tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2:2222', 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2:2222']
2018-12-01 15:47:25,349 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 46, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '299870d1-f53d-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
                         'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2'},
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5950832',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
              'uid': '299870d1-f53d-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '299870d1-f53d-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '299870d1-f53d-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1:2222',
                                                            'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2:2222,tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 15:47:25,411 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 46, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '299bf192-f53d-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
                         'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2'},
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5950835',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
              'uid': '299bf192-f53d-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '299bf192-f53d-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '299bf192-f53d-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1:2222',
                                                            'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2:2222,tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-01 15:47:25,444 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 1, 7, 46, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '29a57b2c-f53d-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
                         'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1'},
              'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5950839',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
              'uid': '29a57b2c-f53d-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '29a57b2c-f53d-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '29a57b2c-f53d-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1:2222',
                                                            'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-0-2:2222,tf-57c54d48-f53d-11e8-964d-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-57c54d48-f53d-11e8-964d-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-04 10:09:10,927 INFO disTf.py:30 start ...
2018-12-04 10:09:11,005 INFO disTf.py:21 service start ...
2018-12-04 10:09:44,657 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-04 10:09:44,657 INFO train_handler.py:153 parse data: {'resource': {'cpu': 2, 'gpu': 1, 'mem': '4g'}, 'type': 'tensorflow', 'data': 'notebooks/MNIST_data', 'detail': {'ps': 1, 'worker': 2}, 'file': '/tmp/mnist.tgz'}
2018-12-04 10:09:44,985 INFO train_handler.py:51 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ab0e9ed4-f769-11e8-91fd-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ab0e9ed4-f769-11e8-91fd-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-04 10:16:04,234 INFO disTf.py:30 start ...
2018-12-04 10:16:04,281 INFO disTf.py:21 service start ...
2018-12-04 10:16:12,407 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-04 10:16:12,407 INFO train_handler.py:154 parse data: {'file': '/tmp/mnist.tgz', 'resource': {'mem': '4g', 'cpu': 2, 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'type': 'tensorflow', 'data': 'notebooks/MNIST_data'}
2018-12-04 10:16:13,845 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-04 10:16:15,673 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 7, 36, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10927925',
              'self_link': '/api/v1/namespaces/default/services/tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
              'uid': '5ecf1bd2-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-04 10:16:15,673 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-04 10:16:15,877 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 7, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10927928',
              'self_link': '/api/v1/namespaces/default/services/tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
              'uid': '5f06d41c-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-04 10:16:15,877 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-04 10:16:16,080 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 7, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10927930',
              'self_link': '/api/v1/namespaces/default/services/tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
              'uid': '5f265bdc-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-04 10:16:16,111 INFO train_handler.py:105 ps: ['tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1:2222']
2018-12-04 10:16:16,111 INFO train_handler.py:107 worker: ['tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2:2222', 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2:2222']
2018-12-04 10:16:16,908 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 7, 38, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5fa58672-f769-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
                         'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1'},
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10927933',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
              'uid': '5fa58672-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5fa58672-f769-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5fa58672-f769-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1:2222',
                                                            'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2:2222,tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-04 10:16:17,111 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 7, 38, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5fc5ed3a-f769-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
                         'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2'},
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10927941',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
              'uid': '5fc5ed3a-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5fc5ed3a-f769-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5fc5ed3a-f769-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1:2222',
                                                            'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2:2222,tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-04 10:16:17,580 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 7, 38, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5fe60b06-f769-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
                         'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2'},
              'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10927948',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
              'uid': '5fe60b06-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5fe60b06-f769-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5fe60b06-f769-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-92127df8-f76a-11e8-a726-08d40cb2834b-ps-0-1:2222',
                                                            'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-0-2:2222,tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-92127df8-f76a-11e8-a726-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-04 10:18:20,766 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-04 10:18:20,766 INFO train_handler.py:154 parse data: {'file': '/tmp/mnist.tgz', 'resource': {'mem': '4g', 'cpu': 2, 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'type': 'tensorflow', 'data': 'notebooks/MNIST_data'}
2018-12-04 10:18:20,782 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-04 10:18:21,563 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 9, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10928169',
              'self_link': '/api/v1/namespaces/default/services/tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
              'uid': 'a9eea41e-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-04 10:18:21,563 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-04 10:18:21,829 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 9, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10928171',
              'self_link': '/api/v1/namespaces/default/services/tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
              'uid': 'aa162c4a-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-04 10:18:21,829 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-04 10:18:22,095 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 9, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10928173',
              'self_link': '/api/v1/namespaces/default/services/tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
              'uid': 'aa3eba88-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-04 10:18:22,110 INFO train_handler.py:105 ps: ['tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1:2222']
2018-12-04 10:18:22,110 INFO train_handler.py:107 worker: ['tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2:2222', 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2:2222']
2018-12-04 10:18:22,970 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 9, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'aac7c807-f769-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
                         'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1'},
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10928178',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
              'uid': 'aac7c807-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'aac7c807-f769-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'aac7c807-f769-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1:2222',
                                                            'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2:2222,tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-04 10:18:23,173 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 9, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'aae80ac6-f769-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
                         'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2'},
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10928185',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
              'uid': 'aae80ac6-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'aae80ac6-f769-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'aae80ac6-f769-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1:2222',
                                                            'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2:2222,tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-04 10:18:23,392 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 4, 2, 9, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ab084e79-f769-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
                         'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2'},
              'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10928192',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
              'uid': 'ab084e79-f769-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ab084e79-f769-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ab084e79-f769-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-ps-0-1:2222',
                                                            'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-0-2:2222,tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-de947b50-f76a-11e8-9efc-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:26:21,800 INFO disTf.py:30 start ...
2018-12-05 13:26:21,826 INFO disTf.py:21 service start ...
2018-12-05 13:26:34,062 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-05 13:26:34,062 INFO train_handler.py:154 parse data: {'resource': {'cpu': 2, 'gpu': 1, 'mem': '4g'}, 'file': '/tmp/mnist.tgz', 'data': 'notebooks/MNIST_data', 'type': 'tensorflow', 'detail': {'ps': 1, 'worker': 2}}
2018-12-05 13:26:34,201 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:26:34,220 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 25, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6527539',
              'self_link': '/api/v1/namespaces/default/services/tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
              'uid': '247c3339-f84e-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:26:34,237 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:26:34,248 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 25, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6527541',
              'self_link': '/api/v1/namespaces/default/services/tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
              'uid': '247f0b01-f84e-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:26:34,254 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:26:34,263 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 25, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6527543',
              'self_link': '/api/v1/namespaces/default/services/tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
              'uid': '24810cf6-f84e-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:26:34,317 INFO train_handler.py:105 ps: ['tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1:2222']
2018-12-05 13:26:34,317 INFO train_handler.py:107 worker: ['tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2:2222', 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2:2222']
2018-12-05 13:26:34,367 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 25, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '248f9da3-f84e-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
                         'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1'},
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6527545',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
              'uid': '248f9da3-f84e-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '248f9da3-f84e-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '248f9da3-f84e-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1:2222',
                                                            'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2:2222,tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:26:34,400 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 25, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '249487f4-f84e-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
                         'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2'},
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6527550',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
              'uid': '249487f4-f84e-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '249487f4-f84e-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '249487f4-f84e-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1:2222',
                                                            'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2:2222,tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:26:34,466 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 25, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '24994827-f84e-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
                         'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2'},
              'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6527554',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
              'uid': '24994827-f84e-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '24994827-f84e-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '24994827-f84e-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-ps-0-1:2222',
                                                            'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-0-2:2222,tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-54527b3e-f84e-11e8-a44a-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:41:39,122 INFO disTf.py:30 start ...
2018-12-05 13:41:39,125 INFO disTf.py:21 service start ...
2018-12-05 13:41:47,039 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-05 13:41:47,039 INFO train_handler.py:154 parse data: {'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}, 'file': '/test/code/mnist.tgz'}
2018-12-05 13:41:47,076 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:41:47,115 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 40, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529240',
              'self_link': '/api/v1/namespaces/default/services/tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
              'uid': '4499fb48-f850-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:41:47,119 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:41:47,132 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 40, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529242',
              'self_link': '/api/v1/namespaces/default/services/tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
              'uid': '449ce9a9-f850-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:41:47,135 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:41:47,158 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 40, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529244',
              'self_link': '/api/v1/namespaces/default/services/tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
              'uid': '449f6ee1-f850-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:41:47,193 INFO train_handler.py:105 ps: ['tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1:2222']
2018-12-05 13:41:47,193 INFO train_handler.py:107 worker: ['tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2:2222', 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2:2222']
2018-12-05 13:41:47,309 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 40, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '44b3d681-f850-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
                         'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2'},
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529247',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
              'uid': '44b3d681-f850-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '44b3d681-f850-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '44b3d681-f850-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1:2222',
                                                            'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2:2222,tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:41:47,379 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 40, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '44bed8b2-f850-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
                         'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2'},
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529253',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
              'uid': '44bed8b2-f850-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '44bed8b2-f850-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '44bed8b2-f850-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1:2222',
                                                            'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2:2222,tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:41:47,485 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 40, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '44c93bb9-f850-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
                         'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1'},
              'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529261',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
              'uid': '44c93bb9-f850-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '44c93bb9-f850-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '44c93bb9-f850-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1:2222',
                                                            'tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-0-2:2222,tf-747fa002-f850-11e8-ae65-08d40cb2834b-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-747fa002-f850-11e8-ae65-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:47:23,970 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-05 13:47:23,970 INFO train_handler.py:154 parse data: {'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'type': 'tensorflow', 'detail': {'worker': 2, 'ps': 1}, 'file': '/test/code/mnist.tgz'}
2018-12-05 13:47:23,983 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:47:24,015 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 46, 3, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529866',
              'self_link': '/api/v1/namespaces/default/services/tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
              'uid': '0d6925a6-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:47:24,023 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:47:24,134 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 46, 3, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529867',
              'self_link': '/api/v1/namespaces/default/services/tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
              'uid': '0d6bd1a2-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:47:24,134 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:47:24,151 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 46, 3, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529870',
              'self_link': '/api/v1/namespaces/default/services/tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
              'uid': '0d7d81e3-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:47:24,209 INFO train_handler.py:105 ps: ['tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1:2222']
2018-12-05 13:47:24,210 INFO train_handler.py:107 worker: ['tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2:2222', 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2:2222']
2018-12-05 13:47:24,306 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 46, 3, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0d8ca692-f851-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
                         'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2'},
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529872',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
              'uid': '0d8ca692-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0d8ca692-f851-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0d8ca692-f851-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1:2222',
                                                            'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2:2222,tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:47:24,341 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 46, 3, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0d99848e-f851-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
                         'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2'},
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529879',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
              'uid': '0d99848e-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0d99848e-f851-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0d99848e-f851-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1:2222',
                                                            'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2:2222,tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:47:24,378 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 46, 3, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0d9ec6af-f851-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
                         'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1'},
              'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6529882',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
              'uid': '0d9ec6af-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0d9ec6af-f851-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0d9ec6af-f851-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1:2222',
                                                            'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-0-2:2222,tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3d5340b0-f851-11e8-ad26-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:48:51,618 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-05 13:48:51,618 INFO train_handler.py:154 parse data: {'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'type': 'tensorflow', 'detail': {'worker': 3, 'ps': 1}, 'file': '/test/code/mnist.tgz'}
2018-12-05 13:48:51,633 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:48:51,659 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530062',
              'self_link': '/api/v1/namespaces/default/services/tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
              'uid': '41a73594-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:48:51,670 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:48:51,696 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530063',
              'self_link': '/api/v1/namespaces/default/services/tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
              'uid': '41a993df-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:48:51,696 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:48:51,734 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530064',
              'self_link': '/api/v1/namespaces/default/services/tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
              'uid': '41aeddea-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:48:51,734 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-05 13:48:51,751 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530067',
              'self_link': '/api/v1/namespaces/default/services/tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
              'uid': '41b43133-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-05 13:48:51,843 INFO train_handler.py:105 ps: ['tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1:2222']
2018-12-05 13:48:51,843 INFO train_handler.py:107 worker: ['tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3:2222', 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3:2222', 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3:2222']
2018-12-05 13:48:51,930 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '41cd4237-f851-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
                         'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3'},
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530070',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
              'uid': '41cd4237-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '41cd4237-f851-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '41cd4237-f851-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
                                               'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3'},
                                    'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1:2222',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:48:52,032 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '41d68073-f851-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
                         'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3'},
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530075',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
              'uid': '41d68073-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '41d68073-f851-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '41d68073-f851-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
                                               'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3'},
                                    'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1:2222',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:48:52,089 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '41e69a9d-f851-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
                         'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3'},
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530083',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
              'uid': '41e69a9d-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '41e69a9d-f851-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '41e69a9d-f851-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
                                               'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3'},
                                    'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1:2222',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-05 13:48:52,175 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 5, 5, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '41ef08ab-f851-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
                         'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1'},
              'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '6530087',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
              'uid': '41ef08ab-f851-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '41ef08ab-f851-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '41ef08ab-f851-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1:2222',
                                                            'tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-0-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-1-3:2222,tf-71915178-f851-11e8-8c30-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-71915178-f851-11e8-8c30-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:01:05,952 INFO disTf.py:30 start ...
2018-12-07 14:01:06,042 INFO disTf.py:21 service start ...
2018-12-07 14:01:28,053 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-07 14:01:28,053 INFO train_handler.py:154 parse data: {'detail': {'ps': 1, 'worker': 2}, 'data': 'notebooks/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'type': 'tensorflow', 'file': '/tmp/mnist.tgz'}
2018-12-07 14:01:28,395 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:01:29,477 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 52, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311615',
              'self_link': '/api/v1/namespaces/default/services/tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
              'uid': '4ee6f6c4-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:01:29,480 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:01:29,674 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 52, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311617',
              'self_link': '/api/v1/namespaces/default/services/tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
              'uid': '4f0d2461-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:01:29,677 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:01:29,877 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 52, 41, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311619',
              'self_link': '/api/v1/namespaces/default/services/tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
              'uid': '4f250b36-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:01:29,896 INFO train_handler.py:105 ps: ['tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1:2222']
2018-12-07 14:01:29,896 INFO train_handler.py:107 worker: ['tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2:2222', 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2:2222']
2018-12-07 14:01:30,663 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 52, 41, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4fa02015-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
                         'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1'},
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311623',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
              'uid': '4fa02015-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4fa02015-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4fa02015-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1:2222',
                                                            'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2:2222,tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:01:30,870 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 52, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4fbffb11-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
                         'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2'},
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311631',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
              'uid': '4fbffb11-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4fbffb11-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4fbffb11-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1:2222',
                                                            'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2:2222,tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:01:31,421 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 52, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4fdfdca1-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
                         'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2'},
              'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311639',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
              'uid': '4fdfdca1-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4fdfdca1-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4fdfdca1-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-ps-0-1:2222',
                                                            'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-0-2:2222,tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-89439b0a-f9e5-11e8-8d52-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:04:07,608 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-07 14:04:07,608 INFO train_handler.py:154 parse data: {'detail': {'ps': 1, 'worker': 2}, 'data': 'notebooks/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'type': 'tensorflow', 'file': '/tmp/mnist.tgz'}
2018-12-07 14:04:07,623 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:04:08,384 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 55, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311922',
              'self_link': '/api/v1/namespaces/default/services/tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
              'uid': 'ad9d83dc-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:04:08,387 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:04:08,634 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 55, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311927',
              'self_link': '/api/v1/namespaces/default/services/tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
              'uid': 'adc375e7-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:04:08,637 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:04:08,885 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 55, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311929',
              'self_link': '/api/v1/namespaces/default/services/tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
              'uid': 'ade9b53c-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:04:08,934 INFO train_handler.py:105 ps: ['tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1:2222']
2018-12-07 14:04:08,934 INFO train_handler.py:107 worker: ['tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2:2222', 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2:2222']
2018-12-07 14:04:09,803 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 55, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ae7a63df-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
                         'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1'},
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311932',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
              'uid': 'ae7a63df-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ae7a63df-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ae7a63df-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1:2222',
                                                            'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2:2222,tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:04:10,014 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 55, 21, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ae9a56b5-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
                         'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2'},
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311939',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
              'uid': 'ae9a56b5-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ae9a56b5-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ae9a56b5-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1:2222',
                                                            'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2:2222,tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:04:10,221 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 55, 21, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'aeba3171-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
                         'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2'},
              'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11311946',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
              'uid': 'aeba3171-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'aeba3171-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'aeba3171-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-ps-0-1:2222',
                                                            'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-0-2:2222,tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow = '
                                                         'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-e85db1a2-f9e5-11e8-a1cc-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:05:42,253 INFO disTf.py:30 start ...
2018-12-07 14:05:42,257 INFO disTf.py:21 service start ...
2018-12-07 14:05:48,674 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/tmp/mnist.tgz",\r\n    "data": "notebooks/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}\r\n'
2018-12-07 14:05:48,675 INFO train_handler.py:154 parse data: {'file': '/tmp/mnist.tgz', 'type': 'tensorflow', 'resource': {'mem': '4g', 'cpu': 2, 'gpu': 1}, 'data': 'notebooks/MNIST_data', 'detail': {'ps': 1, 'worker': 2}}
2018-12-07 14:05:48,783 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:05:49,535 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11312157',
              'self_link': '/api/v1/namespaces/default/services/tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
              'uid': 'e9e72e3f-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:05:49,537 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:05:49,731 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11312159',
              'self_link': '/api/v1/namespaces/default/services/tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
              'uid': 'ea0d45a3-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:05:49,734 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-07 14:05:49,926 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 57, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11312161',
              'self_link': '/api/v1/namespaces/default/services/tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
              'uid': 'ea251782-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-07 14:05:49,994 INFO train_handler.py:105 ps: ['tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1:2222']
2018-12-07 14:05:49,994 INFO train_handler.py:107 worker: ['tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2:2222', 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2:2222']
2018-12-07 14:05:50,667 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 57, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ea97d83d-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
                         'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1'},
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11312164',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
              'uid': 'ea97d83d-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ea97d83d-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ea97d83d-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1:2222',
                                                            'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2:2222,tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:05:50,873 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 57, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'eab7b061-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
                         'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2'},
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11312172',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
              'uid': 'eab7b061-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'eab7b061-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'eab7b061-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
                                               'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2'},
                                    'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1:2222',
                                                            'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2:2222,tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-07 14:05:51,083 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 7, 5, 57, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ead7577c-f9e4-11e8-bd11-fa163ef8da8a',
                         'job-name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
                         'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2'},
              'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11312179',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
              'uid': 'ead7577c-f9e4-11e8-bd11-fa163ef8da8a'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ead7577c-f9e4-11e8-bd11-fa163ef8da8a'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ead7577c-f9e4-11e8-bd11-fa163ef8da8a',
                                               'job-name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
                                               'tf': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2'},
                                    'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-ps-0-1:2222',
                                                            'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-0-2:2222,tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2:2222',
                                                            '/tmp/mnist.tgz',
                                                            'notebooks/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-249b45d8-f9e6-11e8-af18-08d40cb2834b-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-10 14:53:02,871 INFO disTf.py:30 start ...
2018-12-10 14:53:02,972 INFO disTf.py:21 service start ...
2018-12-10 14:53:16,134 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-10 14:53:16,134 INFO train_handler.py:154 parse data: {'data': '/MNIST_data', 'type': 'tensorflow', 'detail': {'worker': 3, 'ps': 1}, 'file': '/test/code/mnist.tgz', 'resource': {'cpu': 2, 'gpu': 1, 'mem': '4g'}}
2018-12-10 14:53:16,284 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-10 14:53:16,375 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 53, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044925',
              'self_link': '/api/v1/namespaces/default/services/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
              'uid': '13fd1830-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-10 14:53:16,379 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-10 14:53:16,414 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 53, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044927',
              'self_link': '/api/v1/namespaces/default/services/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
              'uid': '1404bb4b-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-10 14:53:16,416 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-10 14:53:16,424 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 53, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044929',
              'self_link': '/api/v1/namespaces/default/services/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
              'uid': '1406217f-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-10 14:53:16,427 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-10 14:53:16,440 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 53, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044931',
              'self_link': '/api/v1/namespaces/default/services/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
              'uid': '1407aebd-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-10 14:53:16,485 INFO train_handler.py:105 ps: ['tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1:2222']
2018-12-10 14:53:16,486 INFO train_handler.py:107 worker: ['tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3:2222', 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3:2222', 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3:2222']
2018-12-10 14:53:16,532 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 53, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '14152db3-fc48-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
                         'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3'},
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044934',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
              'uid': '14152db3-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '14152db3-fc48-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '14152db3-fc48-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
                                               'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3'},
                                    'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1:2222',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-10 14:53:16,563 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 53, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '14196341-fc48-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
                         'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3'},
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044936',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
              'uid': '14196341-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '14196341-fc48-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '14196341-fc48-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
                                               'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3'},
                                    'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1:2222',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-10 14:53:16,633 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '141e16e6-fc48-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
                         'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3'},
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044943',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
              'uid': '141e16e6-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '141e16e6-fc48-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '141e16e6-fc48-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
                                               'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3'},
                                    'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1:2222',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-10 14:53:16,678 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 10, 6, 51, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '1429c408-fc48-11e8-9965-6c92bf52b97e',
                         'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
                         'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1'},
              'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8044952',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
              'uid': '1429c408-fc48-11e8-9965-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '1429c408-fc48-11e8-9965-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '1429c408-fc48-11e8-9965-6c92bf52b97e',
                                               'job-name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
                                               'tf': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1'},
                                    'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1:2222',
                                                            'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-0-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-1-3:2222,tf-4510683e-fc48-11e8-8a15-08d40cb2834b-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-4510683e-fc48-11e8-8a15-08d40cb2834b-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 09:51:54,682 INFO disTf.py:30 start ...
2018-12-13 09:51:54,765 INFO disTf.py:21 service start ...
2018-12-13 09:52:02,749 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-13 09:52:02,749 INFO train_handler.py:154 parse data: {'data': '/MNIST_data', 'type': 'tensorflow', 'detail': {'worker': 3, 'ps': 1}, 'file': '/test/code/mnist.tgz', 'resource': {'mem': '4g', 'cpu': 2, 'gpu': 1}}
2018-12-13 09:52:02,944 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 09:52:02,977 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408628',
              'self_link': '/api/v1/namespaces/default/services/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
              'uid': '7e2e2327-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 09:52:02,977 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 09:52:03,000 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408629',
              'self_link': '/api/v1/namespaces/default/services/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
              'uid': '7e3030bd-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 09:52:03,000 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 09:52:03,018 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408631',
              'self_link': '/api/v1/namespaces/default/services/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
              'uid': '7e33b994-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 09:52:03,020 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 09:52:03,066 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408634',
              'self_link': '/api/v1/namespaces/default/services/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
              'uid': '7e36a06b-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 09:52:03,159 INFO train_handler.py:105 ps: ['tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1:2222']
2018-12-13 09:52:03,159 INFO train_handler.py:107 worker: ['tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3:2222', 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3:2222', 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3:2222']
2018-12-13 09:52:03,280 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7e57d08d-fe79-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
                         'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3'},
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408636',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
              'uid': '7e57d08d-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7e57d08d-fe79-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7e57d08d-fe79-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
                                               'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3'},
                                    'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1:2222',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 09:52:03,356 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7e6067b4-fe79-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
                         'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3'},
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408641',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
              'uid': '7e6067b4-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7e6067b4-fe79-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7e6067b4-fe79-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
                                               'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3'},
                                    'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1:2222',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 09:52:03,431 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7e6e4e2a-fe79-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
                         'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3'},
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408648',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
              'uid': '7e6e4e2a-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7e6e4e2a-fe79-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7e6e4e2a-fe79-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
                                               'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3'},
                                    'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1:2222',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 09:52:03,507 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 1, 50, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7e76cf7a-fe79-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
                         'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1'},
              'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8408653',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
              'uid': '7e76cf7a-fe79-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7e76cf7a-fe79-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7e76cf7a-fe79-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
                                               'tf': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1'},
                                    'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1:2222',
                                                            'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-0-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-1-3:2222,tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-afb9fcb8-fe79-11e8-ae48-54ee759117a8-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:24:03,963 INFO disTf.py:30 start ...
2018-12-13 10:24:03,965 INFO disTf.py:21 service start ...
2018-12-13 10:24:18,027 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-13 10:24:18,027 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2018-12-13 10:24:18,073 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:24:18,114 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411577',
              'self_link': '/api/v1/namespaces/default/services/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
              'uid': 'ff3801e2-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:24:18,115 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:24:18,160 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411578',
              'self_link': '/api/v1/namespaces/default/services/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
              'uid': 'ff3cb18e-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:24:18,162 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:24:18,168 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411581',
              'self_link': '/api/v1/namespaces/default/services/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
              'uid': 'ff43bd66-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:24:18,170 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:24:18,189 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411583',
              'self_link': '/api/v1/namespaces/default/services/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
              'uid': 'ff44ef4a-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:24:18,284 INFO train_handler.py:105 ps: ['tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1:2222']
2018-12-13 10:24:18,284 INFO train_handler.py:107 worker: ['tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3:2222', 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3:2222', 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3:2222']
2018-12-13 10:24:18,319 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ff59d5ef-fe7d-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1'},
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411585',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
              'uid': 'ff59d5ef-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ff59d5ef-fe7d-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ff59d5ef-fe7d-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:24:18,343 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ff5c8d19-fe7d-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3'},
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411588',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
              'uid': 'ff5c8d19-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ff5c8d19-fe7d-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ff5c8d19-fe7d-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:24:18,363 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ff602ad2-fe7d-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3'},
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411592',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
              'uid': 'ff602ad2-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ff602ad2-fe7d-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ff602ad2-fe7d-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:24:18,425 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 22, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ff62fae6-fe7d-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3'},
              'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8411597',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
              'uid': 'ff62fae6-fe7d-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ff62fae6-fe7d-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ff62fae6-fe7d-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-0-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-1-3:2222,tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-313de888-fe7e-11e8-bc14-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:34:50,761 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-13 10:34:50,762 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2018-12-13 10:34:50,776 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:34:50,804 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412701',
              'self_link': '/api/v1/namespaces/default/services/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
              'uid': '7858e613-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:34:50,806 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:34:50,825 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412702',
              'self_link': '/api/v1/namespaces/default/services/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
              'uid': '785a4fcc-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:34:50,827 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:34:50,861 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412703',
              'self_link': '/api/v1/namespaces/default/services/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
              'uid': '785d7545-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:34:50,863 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:34:50,875 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412707',
              'self_link': '/api/v1/namespaces/default/services/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
              'uid': '7863241f-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:34:50,979 INFO train_handler.py:105 ps: ['tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1:2222']
2018-12-13 10:34:50,979 INFO train_handler.py:107 worker: ['tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3:2222', 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3:2222', 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3:2222']
2018-12-13 10:34:51,013 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7877dba4-fe7f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1'},
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412710',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
              'uid': '7877dba4-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7877dba4-fe7f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7877dba4-fe7f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:34:51,031 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '787ac2f6-fe7f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3'},
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412713',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
              'uid': '787ac2f6-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '787ac2f6-fe7f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '787ac2f6-fe7f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:34:51,058 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '787d9c63-fe7f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3'},
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412717',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
              'uid': '787d9c63-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '787d9c63-fe7f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '787d9c63-fe7f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:34:51,084 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 33, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7881a47f-fe7f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3'},
              'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412722',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
              'uid': '7881a47f-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7881a47f-fe7f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7881a47f-fe7f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-0-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-1-3:2222,tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-aa6191ae-fe7f-11e8-9c34-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:35:03,775 INFO disTf.py:30 start ...
2018-12-13 10:35:03,777 INFO disTf.py:21 service start ...
2018-12-13 10:35:46,673 INFO train_handler.py:145 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-13 10:35:46,673 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-13 10:35:46,692 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:35:46,715 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 34, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412937',
              'self_link': '/api/v1/namespaces/default/services/tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
              'uid': '99ac554d-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:35:46,716 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:35:46,735 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 34, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412938',
              'self_link': '/api/v1/namespaces/default/services/tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
              'uid': '99adaaac-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:35:46,738 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 10:35:46,745 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 34, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412939',
              'self_link': '/api/v1/namespaces/default/services/tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
              'uid': '99b0d314-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 10:35:46,795 INFO train_handler.py:105 ps: ['tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1:2222']
2018-12-13 10:35:46,795 INFO train_handler.py:107 worker: ['tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2:2222', 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2:2222']
2018-12-13 10:35:46,830 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 34, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '99bc3a48-fe7f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1'},
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412943',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
              'uid': '99bc3a48-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '99bc3a48-fe7f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '99bc3a48-fe7f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2:2222,tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:35:46,856 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 34, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '99bfdfed-fe7f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2'},
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412945',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
              'uid': '99bfdfed-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '99bfdfed-fe7f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '99bfdfed-fe7f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2:2222,tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 10:35:46,894 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 2, 34, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '99c3a58d-fe7f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2'},
              'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8412951',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
              'uid': '99c3a58d-fe7f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '99c3a58d-fe7f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '99c3a58d-fe7f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-0-2:2222,tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cbb4e7da-fe7f-11e8-9c8c-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:03:40,406 INFO disTf.py:30 start ...
2018-12-13 11:03:40,408 INFO disTf.py:21 service start ...
2018-12-13 11:03:42,609 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-13 11:03:42,609 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2018-12-13 11:03:42,625 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:03:42,650 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415888',
              'self_link': '/api/v1/namespaces/default/services/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
              'uid': '809d691b-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:03:42,651 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:03:42,657 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415889',
              'self_link': '/api/v1/namespaces/default/services/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
              'uid': '809efe6b-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:03:42,658 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:03:42,687 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415892',
              'self_link': '/api/v1/namespaces/default/services/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
              'uid': '80a00701-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:03:42,689 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:03:42,696 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415895',
              'self_link': '/api/v1/namespaces/default/services/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
              'uid': '80a4aeee-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:03:42,730 INFO train_handler.py:105 ps: ['tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1:2222']
2018-12-13 11:03:42,731 INFO train_handler.py:107 worker: ['tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3:2222', 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3:2222', 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3:2222']
2018-12-13 11:03:42,765 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '80ae2b65-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1'},
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415897',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
              'uid': '80ae2b65-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '80ae2b65-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '80ae2b65-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:03:42,783 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '80b0e1d0-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3'},
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415898',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
              'uid': '80b0e1d0-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '80b0e1d0-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '80b0e1d0-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:03:42,804 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '80b40774-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3'},
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415902',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
              'uid': '80b40774-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '80b40774-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '80b40774-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:03:42,827 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '80b6da6d-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3'},
              'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8415907',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
              'uid': '80b6da6d-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '80b6da6d-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '80b6da6d-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-0-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-1-3:2222,tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b2a47c2c-fe83-11e8-bb6d-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:04:22,427 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-13 11:04:22,427 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2018-12-13 11:04:22,438 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:04:22,460 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416059',
              'self_link': '/api/v1/namespaces/default/services/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
              'uid': '98586bfc-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:04:22,462 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:04:22,468 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416060',
              'self_link': '/api/v1/namespaces/default/services/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
              'uid': '9859afba-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:04:22,470 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:04:22,514 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416061',
              'self_link': '/api/v1/namespaces/default/services/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
              'uid': '985acd69-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:04:22,515 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:04:22,525 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416065',
              'self_link': '/api/v1/namespaces/default/services/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
              'uid': '9861d6cd-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:04:22,542 INFO train_handler.py:105 ps: ['tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1:2222']
2018-12-13 11:04:22,542 INFO train_handler.py:107 worker: ['tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3:2222', 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3:2222', 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3:2222']
2018-12-13 11:04:22,578 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '98692da4-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1'},
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416067',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
              'uid': '98692da4-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '98692da4-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '98692da4-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:04:22,603 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '986c3411-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3'},
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416070',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
              'uid': '986c3411-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '986c3411-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '986c3411-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:04:22,664 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '986ff8f6-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3'},
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416074',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
              'uid': '986ff8f6-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '986ff8f6-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '986ff8f6-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:04:22,695 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 2, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '98793d96-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3'},
              'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416082',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
              'uid': '98793d96-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '98793d96-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '98793d96-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-0-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-1-3:2222,tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-ca605b66-fe83-11e8-a856-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:05:14,778 INFO disTf.py:30 start ...
2018-12-13 11:05:14,780 INFO disTf.py:21 service start ...
2018-12-13 11:05:20,382 INFO train_handler.py:145 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-13 11:05:20,382 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-13 11:05:20,397 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:05:20,420 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 3, 56, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416573',
              'self_link': '/api/v1/namespaces/default/services/tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
              'uid': 'bae4507e-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:05:20,421 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:05:20,427 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 3, 56, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416574',
              'self_link': '/api/v1/namespaces/default/services/tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
              'uid': 'bae5a72c-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:05:20,429 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 11:05:20,459 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 3, 56, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416577',
              'self_link': '/api/v1/namespaces/default/services/tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
              'uid': 'bae6c8ac-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 11:05:20,498 INFO train_handler.py:105 ps: ['tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1:2222']
2018-12-13 11:05:20,498 INFO train_handler.py:107 worker: ['tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2:2222', 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2:2222']
2018-12-13 11:05:20,527 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 3, 56, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'baf43d79-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1'},
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416579',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
              'uid': 'baf43d79-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'baf43d79-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'baf43d79-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2:2222,tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:05:20,562 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 3, 56, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'baf69112-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2'},
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416582',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
              'uid': 'baf69112-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'baf69112-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'baf69112-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2:2222,tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 11:05:20,599 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 3, 3, 56, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'bafc2103-fe83-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2'},
              'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8416588',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
              'uid': 'bafc2103-fe83-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'bafc2103-fe83-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'bafc2103-fe83-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-0-2:2222,tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-eceb72ba-fe83-11e8-97a5-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 14:23:27,851 INFO disTf.py:30 start ...
2018-12-13 14:23:27,853 INFO disTf.py:21 service start ...
2018-12-13 14:23:37,341 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-13 14:23:37,341 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2018-12-13 14:23:37,355 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 14:23:37,379 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432927',
              'self_link': '/api/v1/namespaces/default/services/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
              'uid': '6e15676e-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 14:23:37,381 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 14:23:37,389 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432928',
              'self_link': '/api/v1/namespaces/default/services/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
              'uid': '6e16fa85-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 14:23:37,391 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 14:23:37,397 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432929',
              'self_link': '/api/v1/namespaces/default/services/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
              'uid': '6e187251-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 14:23:37,399 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 14:23:37,405 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432932',
              'self_link': '/api/v1/namespaces/default/services/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
              'uid': '6e19bd67-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 14:23:37,457 INFO train_handler.py:105 ps: ['tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1:2222']
2018-12-13 14:23:37,457 INFO train_handler.py:107 worker: ['tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3:2222', 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3:2222', 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3:2222']
2018-12-13 14:23:37,490 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6e262ac7-fe9f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1'},
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432935',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
              'uid': '6e262ac7-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6e262ac7-fe9f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6e262ac7-fe9f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 14:23:37,524 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6e287718-fe9f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3'},
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432940',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
              'uid': '6e287718-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6e287718-fe9f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6e287718-fe9f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 14:23:37,560 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6e2e3348-fe9f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3'},
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432945',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
              'uid': '6e2e3348-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6e2e3348-fe9f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6e2e3348-fe9f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 14:23:37,606 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 22, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6e3379d1-fe9f-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3'},
              'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8432949',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
              'uid': '6e3379d1-fe9f-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6e3379d1-fe9f-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6e3379d1-fe9f-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-0-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-1-3:2222,tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a00f508a-fe9f-11e8-9f7b-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 14:52:13,019 INFO disTf.py:30 start ...
2018-12-13 14:52:13,022 INFO disTf.py:21 service start ...
2018-12-13 14:52:15,738 INFO train_handler.py:145 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-13 14:52:15,738 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-13 14:52:15,755 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 14:52:15,780 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 50, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8435591',
              'self_link': '/api/v1/namespaces/default/services/tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
              'uid': '6e56962e-fea3-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 14:52:15,782 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 14:52:15,796 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 50, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8435592',
              'self_link': '/api/v1/namespaces/default/services/tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
              'uid': '6e582570-fea3-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 14:52:15,798 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-13 14:52:15,807 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 50, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8435594',
              'self_link': '/api/v1/namespaces/default/services/tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
              'uid': '6e5a8a10-fea3-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-13 14:52:15,865 INFO train_handler.py:105 ps: ['tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1:2222']
2018-12-13 14:52:15,865 INFO train_handler.py:107 worker: ['tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2:2222', 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2:2222']
2018-12-13 14:52:15,909 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 50, 52, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6e68bab1-fea3-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1'},
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8435597',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
              'uid': '6e68bab1-fea3-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6e68bab1-fea3-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6e68bab1-fea3-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2:2222,tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 14:52:15,929 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 50, 52, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6e6c60a7-fea3-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2'},
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8435600',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
              'uid': '6e6c60a7-fea3-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6e6c60a7-fea3-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6e6c60a7-fea3-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2:2222,tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-13 14:52:15,952 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 13, 6, 50, 52, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6e700974-fea3-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2'},
              'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8435604',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
              'uid': '6e700974-fea3-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6e700974-fea3-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6e700974-fea3-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-0-2:2222,tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a04dffca-fea3-11e8-9df7-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:41:14,664 INFO disTf.py:30 start ...
2018-12-14 14:41:14,666 INFO disTf.py:21 service start ...
2018-12-14 14:41:23,469 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-14 14:41:23,470 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2018-12-14 14:41:23,488 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:41:23,530 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557686',
              'self_link': '/api/v1/namespaces/default/services/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
              'uid': '1458598c-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:41:23,532 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:41:23,542 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557688',
              'self_link': '/api/v1/namespaces/default/services/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
              'uid': '145cab2e-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:41:23,545 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:41:23,558 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557690',
              'self_link': '/api/v1/namespaces/default/services/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
              'uid': '145e95f3-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:41:23,560 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:41:23,566 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557692',
              'self_link': '/api/v1/namespaces/default/services/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
              'uid': '1460e0ba-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:41:23,590 INFO train_handler.py:105 ps: ['tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1:2222']
2018-12-14 14:41:23,590 INFO train_handler.py:107 worker: ['tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3:2222', 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3:2222', 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3:2222']
2018-12-14 14:41:23,619 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '14686b86-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1'},
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557695',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
              'uid': '14686b86-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '14686b86-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '14686b86-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:41:23,673 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '146b471a-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3'},
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557696',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
              'uid': '146b471a-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '146b471a-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '146b471a-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:41:23,699 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '1472dea1-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3'},
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557700',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
              'uid': '1472dea1-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '1472dea1-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '1472dea1-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:41:23,720 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '14773acc-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3'},
              'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557705',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
              'uid': '14773acc-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '14773acc-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '14773acc-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-0-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-1-3:2222,tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-45ef6882-ff6b-11e8-bfd7-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:43:08,999 INFO train_handler.py:145 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2018-12-14 14:43:08,999 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2018-12-14 14:43:09,009 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:43:09,031 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557940',
              'self_link': '/api/v1/namespaces/default/services/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
              'uid': '533d7fdb-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:43:09,033 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:43:09,038 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557941',
              'self_link': '/api/v1/namespaces/default/services/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
              'uid': '533ef566-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:43:09,041 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:43:09,065 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557942',
              'self_link': '/api/v1/namespaces/default/services/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
              'uid': '53402379-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:43:09,066 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:43:09,073 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557945',
              'self_link': '/api/v1/namespaces/default/services/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
              'uid': '5343f21a-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:43:09,111 INFO train_handler.py:105 ps: ['tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1:2222']
2018-12-14 14:43:09,111 INFO train_handler.py:107 worker: ['tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3:2222', 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3:2222', 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3:2222']
2018-12-14 14:43:09,141 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '534d5040-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1'},
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557948',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
              'uid': '534d5040-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '534d5040-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '534d5040-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:43:09,164 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '535117c2-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3'},
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557949',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
              'uid': '535117c2-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '535117c2-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '535117c2-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:43:09,206 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5353b223-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3'},
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557955',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
              'uid': '5353b223-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5353b223-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5353b223-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:43:09,254 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 41, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '535a848c-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3'},
              'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8557960',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
              'uid': '535a848c-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '535a848c-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '535a848c-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-0-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-1-3:2222,tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-84d5e746-ff6b-11e8-8383-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:46:11,248 INFO train_handler.py:145 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-14 14:46:11,249 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-14 14:46:11,261 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:46:11,281 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 44, 48, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8558397',
              'self_link': '/api/v1/namespaces/default/services/tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
              'uid': 'bfdee1e0-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:46:11,283 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:46:11,381 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 44, 48, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8558398',
              'self_link': '/api/v1/namespaces/default/services/tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
              'uid': 'bfe0524c-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:46:11,383 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:46:11,404 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 44, 48, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8558400',
              'self_link': '/api/v1/namespaces/default/services/tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
              'uid': 'bfef65c6-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:46:11,466 INFO train_handler.py:105 ps: ['tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1:2222']
2018-12-14 14:46:11,467 INFO train_handler.py:107 worker: ['tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2:2222', 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2:2222']
2018-12-14 14:46:11,532 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 44, 48, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c0000628-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1'},
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8558403',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
              'uid': 'c0000628-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c0000628-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c0000628-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2:2222,tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:46:11,559 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 44, 48, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c006eccc-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2'},
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8558406',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
              'uid': 'c006eccc-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c006eccc-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c006eccc-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2:2222,tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:46:11,586 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 44, 48, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c00bb65c-ff6b-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2'},
              'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8558412',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
              'uid': 'c00bb65c-ff6b-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c00bb65c-ff6b-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c00bb65c-ff6b-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-0-2:2222,tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-f1770890-ff6b-11e8-95cd-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:57:50,492 INFO train_handler.py:145 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-14 14:57:50,492 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-14 14:57:50,507 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:57:50,531 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 56, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8559658',
              'self_link': '/api/v1/namespaces/default/services/tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
              'uid': '60a8a9fb-ff6d-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:57:50,533 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:57:50,539 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 56, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8559659',
              'self_link': '/api/v1/namespaces/default/services/tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
              'uid': '60aa2f6f-ff6d-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:57:50,541 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 14:57:50,547 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 56, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8559660',
              'self_link': '/api/v1/namespaces/default/services/tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
              'uid': '60ab8f4e-ff6d-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 14:57:50,609 INFO train_handler.py:105 ps: ['tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1:2222']
2018-12-14 14:57:50,610 INFO train_handler.py:107 worker: ['tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2:2222', 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2:2222']
2018-12-14 14:57:50,639 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 56, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '60b88991-ff6d-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1'},
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8559665',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
              'uid': '60b88991-ff6d-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '60b88991-ff6d-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '60b88991-ff6d-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2:2222,tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:57:50,662 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 56, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '60bb07d2-ff6d-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2'},
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8559666',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
              'uid': '60bb07d2-ff6d-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '60bb07d2-ff6d-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '60bb07d2-ff6d-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2:2222,tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 14:57:50,696 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 6, 56, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '60bea31b-ff6d-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2'},
              'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8559670',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
              'uid': '60bea31b-ff6d-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '60bea31b-ff6d-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '60bea31b-ff6d-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-0-2:2222,tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-923f1446-ff6d-11e8-b4b8-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 17:31:10,924 INFO train_handler.py:145 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-14 17:31:10,924 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-14 17:31:10,938 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 17:31:10,976 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 9, 29, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8575660',
              'self_link': '/api/v1/namespaces/default/services/tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
              'uid': 'cc97016d-ff82-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 17:31:10,978 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 17:31:10,984 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 9, 29, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8575661',
              'self_link': '/api/v1/namespaces/default/services/tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
              'uid': 'cc9ad760-ff82-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 17:31:10,986 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-14 17:31:10,993 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 9, 29, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8575662',
              'self_link': '/api/v1/namespaces/default/services/tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
              'uid': 'cc9be344-ff82-11e8-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-14 17:31:11,040 INFO train_handler.py:105 ps: ['tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1:2222']
2018-12-14 17:31:11,040 INFO train_handler.py:107 worker: ['tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2:2222', 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2:2222']
2018-12-14 17:31:11,074 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 9, 29, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'cca76bcd-ff82-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1'},
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8575666',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
              'uid': 'cca76bcd-ff82-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'cca76bcd-ff82-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'cca76bcd-ff82-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2:2222,tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 17:31:11,113 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 9, 29, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ccaa1d35-ff82-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2'},
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8575667',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
              'uid': 'ccaa1d35-ff82-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ccaa1d35-ff82-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ccaa1d35-ff82-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2:2222,tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-14 17:31:11,137 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 14, 9, 29, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ccb00b18-ff82-11e8-8c08-6c92bf52b97e',
                         'job-name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2'},
              'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '8575671',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
              'uid': 'ccb00b18-ff82-11e8-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ccb00b18-ff82-11e8-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ccb00b18-ff82-11e8-8c08-6c92bf52b97e',
                                               'job-name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-0-2:2222,tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-fe21a1ae-ff82-11e8-862e-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-18 11:02:55,935 INFO disTf.py:30 start ...
2018-12-18 11:03:06,826 INFO disTf.py:30 start ...
2018-12-18 11:03:06,830 INFO disTf.py:21 service start ...
2018-12-18 11:04:14,687 INFO train_handler.py:145 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-18 11:04:14,688 INFO train_handler.py:154 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-18 11:04:14,735 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-18 11:04:14,792 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 3, 2, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9123819',
              'self_link': '/api/v1/namespaces/default/services/tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
              'uid': '69c0f2c6-0271-11e9-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-18 11:04:14,793 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-18 11:04:14,831 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 3, 2, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9123821',
              'self_link': '/api/v1/namespaces/default/services/tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
              'uid': '69c59dcd-0271-11e9-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-18 11:04:14,833 INFO train_handler.py:52 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-18 11:04:14,841 INFO train_handler.py:57 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 3, 2, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9123823',
              'self_link': '/api/v1/namespaces/default/services/tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
              'uid': '69cba425-0271-11e9-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-18 11:04:14,939 INFO train_handler.py:105 ps: ['tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1:2222']
2018-12-18 11:04:14,939 INFO train_handler.py:107 worker: ['tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2:2222', 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2:2222']
2018-12-18 11:04:14,979 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 3, 2, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '69e015c7-0271-11e9-8c08-6c92bf52b97e',
                         'job-name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1'},
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9123825',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
              'uid': '69e015c7-0271-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '69e015c7-0271-11e9-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '69e015c7-0271-11e9-8c08-6c92bf52b97e',
                                               'job-name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2:2222,tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-18 11:04:15,013 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 3, 2, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '69e34494-0271-11e9-8c08-6c92bf52b97e',
                         'job-name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2'},
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9123828',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
              'uid': '69e34494-0271-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '69e34494-0271-11e9-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '69e34494-0271-11e9-8c08-6c92bf52b97e',
                                               'job-name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2:2222,tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-18 11:04:15,051 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 3, 2, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '69e88c35-0271-11e9-8c08-6c92bf52b97e',
                         'job-name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2'},
              'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9123836',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
              'uid': '69e88c35-0271-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '69e88c35-0271-11e9-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '69e88c35-0271-11e9-8c08-6c92bf52b97e',
                                               'job-name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-0-2:2222,tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-99d41f90-0271-11e9-805c-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-18 20:24:15,787 INFO disTf.py:32 start ...
2018-12-18 20:26:02,863 INFO disTf.py:32 start ...
2018-12-18 20:31:09,140 INFO disTf.py:32 start ...
2018-12-18 20:32:12,521 INFO disTf.py:32 start ...
2018-12-18 20:32:33,233 INFO disTf.py:32 start ...
2018-12-18 20:32:33,253 INFO disTf.py:23 service start ...
2018-12-18 20:32:37,703 INFO posthandler.py:67 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2,\r\n            "chief":1\r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 20:32:37,703 INFO posthandler.py:70 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2, 'chief': 1}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:07:21,054 INFO disTf.py:32 start ...
2018-12-18 21:07:27,903 INFO disTf.py:32 start ...
2018-12-18 21:07:27,905 INFO disTf.py:23 service start ...
2018-12-18 21:07:31,530 INFO posthandler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2,\r\n            "chief":1\r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:07:31,530 INFO posthandler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2, 'chief': 1}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:07:31,546 INFO posthandler.py:62 ps: ['tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-ps-0-1:2222']
2018-12-18 21:07:31,546 INFO posthandler.py:64 worker: ['tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-0-2:2222', 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-1-2:2222']
2018-12-18 21:07:31,570 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 6, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-ps-0-1'},
              'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9185415',
              'self_link': '/api/v1/namespaces/default/pods/tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-ps-0-1',
              'uid': 'abbaeb39-02c5-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:07:31,627 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 6, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-0-2'},
              'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9185417',
              'self_link': '/api/v1/namespaces/default/pods/tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-0-2',
              'uid': 'abbcdbee-02c5-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:07:31,653 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 6, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-1-2'},
              'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9185421',
              'self_link': '/api/v1/namespaces/default/pods/tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-1-2',
              'uid': 'abc57297-02c5-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:07:31,665 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 6, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-chief-0-1'},
              'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-chief-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9185425',
              'self_link': '/api/v1/namespaces/default/pods/tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-chief-0-1',
              'uid': 'abc9770b-02c5-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-e0d3cf18-02c5-11e9-abc5-54e1ad5a0176-chief-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:10:07,527 INFO posthandler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:10:07,527 INFO posthandler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:10:07,539 INFO posthandler.py:62 ps: ['tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-ps-0-1:2222']
2018-12-18 21:10:07,539 INFO posthandler.py:64 worker: ['tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-0-2:2222', 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-1-2:2222']
2018-12-18 21:10:07,575 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 8, 38, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-ps-0-1'},
              'name': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9185834',
              'self_link': '/api/v1/namespaces/default/pods/tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-ps-0-1',
              'uid': '08b615c2-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:10:07,592 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 8, 38, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-0-2'},
              'name': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9185836',
              'self_link': '/api/v1/namespaces/default/pods/tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-0-2',
              'uid': '08b9ac90-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:10:07,638 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 8, 38, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-1-2'},
              'name': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9185839',
              'self_link': '/api/v1/namespaces/default/pods/tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-1-2',
              'uid': '08bbface-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-3dcf12b4-02c6-11e9-a266-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:13:10,572 INFO disTf.py:32 start ...
2018-12-18 21:13:10,574 INFO disTf.py:23 service start ...
2018-12-18 21:13:13,899 INFO test2.py:80 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:13:13,899 INFO test2.py:84 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:13:45,492 INFO disTf.py:32 start ...
2018-12-18 21:13:45,494 INFO disTf.py:23 service start ...
2018-12-18 21:13:48,223 INFO test2.py:80 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:13:48,223 INFO test2.py:84 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:13:48,270 INFO test2.py:61 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 12, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-ps-0-1'},
              'name': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9186464',
              'self_link': '/api/v1/namespaces/default/pods/tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-ps-0-1',
              'uid': '8c429566-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'nginx',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:13:48,294 INFO test2.py:61 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 12, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-0-2'},
              'name': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9186466',
              'self_link': '/api/v1/namespaces/default/pods/tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-0-2',
              'uid': '8c44f8d5-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'nginx',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:13:48,356 INFO test2.py:61 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 12, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-1-2'},
              'name': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9186470',
              'self_link': '/api/v1/namespaces/default/pods/tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-1-2',
              'uid': '8c48cd44-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'nginx',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-c15aa4e2-02c6-11e9-90e2-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:16:23,061 INFO disTf.py:34 start ...
2018-12-18 21:16:23,064 INFO disTf.py:25 service start ...
2018-12-18 21:16:28,027 INFO posthandler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:16:28,027 INFO posthandler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:16:28,042 INFO posthandler.py:62 ps: ['tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-ps-0-1:2222']
2018-12-18 21:16:28,042 INFO posthandler.py:64 worker: ['tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-0-2:2222', 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-1-2:2222']
2018-12-18 21:16:28,075 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 14, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-ps-0-1'},
              'name': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9186764',
              'self_link': '/api/v1/namespaces/default/pods/tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-ps-0-1',
              'uid': 'eb82de25-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'nginx',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:16:28,087 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 14, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-0-2'},
              'name': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9186766',
              'self_link': '/api/v1/namespaces/default/pods/tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-0-2',
              'uid': 'eb857a50-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'nginx',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:16:28,113 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 14, 58, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-1-2'},
              'name': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9186769',
              'self_link': '/api/v1/namespaces/default/pods/tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-1-2',
              'uid': 'eb873d31-02c6-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'nginx',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-209ad4c8-02c7-11e9-9279-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:18:42,958 INFO disTf.py:34 start ...
2018-12-18 21:18:42,961 INFO disTf.py:25 service start ...
2018-12-18 21:18:45,641 INFO posthandler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:18:45,641 INFO posthandler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:18:45,654 INFO posthandler.py:62 ps: ['tf-72a10f78-02c7-11e9-8a82-54e1ad5a0176-ps-0-1:2222']
2018-12-18 21:18:45,654 INFO posthandler.py:64 worker: ['tf-72a10f78-02c7-11e9-8a82-54e1ad5a0176-worker-0-2:2222', 'tf-72a10f78-02c7-11e9-8a82-54e1ad5a0176-worker-1-2:2222']
2018-12-18 21:18:45,675 INFO posthandler.py:77 Exception when calling BatchV1Api->create_namespaced_pod: (422)
Reason: Unprocessable Entity
HTTP response headers: HTTPHeaderDict({'Content-Type': 'application/json', 'Date': 'Tue, 18 Dec 2018 13:17:16 GMT', 'Content-Length': '552'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"Pod \"tf-72a10f78-02c7-11e9-8a82-54e1ad5a0176-ps-0-1\" is invalid: spec.containers[0].image: Invalid value: \"tensorflow/tensorflow  \": must not have leading or trailing whitespace","reason":"Invalid","details":{"name":"tf-72a10f78-02c7-11e9-8a82-54e1ad5a0176-ps-0-1","kind":"Pod","causes":[{"reason":"FieldValueInvalid","message":"Invalid value: \"tensorflow/tensorflow  \": must not have leading or trailing whitespace","field":"spec.containers[0].image"}]},"code":422}



2018-12-18 21:19:57,911 INFO disTf.py:34 start ...
2018-12-18 21:19:57,914 INFO disTf.py:25 service start ...
2018-12-18 21:20:00,570 INFO posthandler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:20:00,570 INFO posthandler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:20:00,585 INFO posthandler.py:62 ps: ['tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-ps-0-1:2222']
2018-12-18 21:20:00,585 INFO posthandler.py:64 worker: ['tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-0-2:2222', 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-1-2:2222']
2018-12-18 21:20:00,618 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 18, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-ps-0-1'},
              'name': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187154',
              'self_link': '/api/v1/namespaces/default/pods/tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-ps-0-1',
              'uid': '6a324f17-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:20:00,644 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 18, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-0-2'},
              'name': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187156',
              'self_link': '/api/v1/namespaces/default/pods/tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-0-2',
              'uid': '6a352de5-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:20:00,657 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 18, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-1-2'},
              'name': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187159',
              'self_link': '/api/v1/namespaces/default/pods/tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-1-2',
              'uid': '6a38c2ac-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-9f4a8736-02c7-11e9-9582-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:20:42,785 INFO disTf.py:34 start ...
2018-12-18 21:20:42,787 INFO disTf.py:25 service start ...
2018-12-18 21:20:44,587 INFO posthandler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:20:44,587 INFO posthandler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:20:44,603 INFO posthandler.py:62 ps: ['tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-ps-0-1:2222']
2018-12-18 21:20:44,603 INFO posthandler.py:64 worker: ['tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-0-2:2222', 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-1-2:2222']
2018-12-18 21:20:44,628 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 19, 15, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-ps-0-1'},
              'name': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187274',
              'self_link': '/api/v1/namespaces/default/pods/tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-ps-0-1',
              'uid': '846e8055-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:20:44,642 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 19, 15, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-0-2'},
              'name': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187276',
              'self_link': '/api/v1/namespaces/default/pods/tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-0-2',
              'uid': '84706530-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:20:44,665 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 19, 15, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-1-2'},
              'name': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187280',
              'self_link': '/api/v1/namespaces/default/pods/tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-1-2',
              'uid': '84728a79-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-b986c150-02c7-11e9-9afe-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:23:36,329 INFO disTf.py:34 start ...
2018-12-18 21:23:36,331 INFO disTf.py:25 service start ...
2018-12-18 21:23:38,229 INFO posthandler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n          \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-18 21:23:38,230 INFO posthandler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-18 21:23:38,245 INFO posthandler.py:62 ps: ['tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-ps-0-1:2222']
2018-12-18 21:23:38,246 INFO posthandler.py:64 worker: ['tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-0-2:2222', 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-1-2:2222']
2018-12-18 21:23:38,275 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 22, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-ps-0-1'},
              'name': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187662',
              'self_link': '/api/v1/namespaces/default/pods/tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-ps-0-1',
              'uid': 'ebef0b8c-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:23:38,354 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 22, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-0-2'},
              'name': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187664',
              'self_link': '/api/v1/namespaces/default/pods/tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-0-2',
              'uid': 'ebf0fc78-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-18 21:23:38,390 INFO posthandler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 18, 13, 22, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-1-2'},
              'name': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9187668',
              'self_link': '/api/v1/namespaces/default/pods/tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-1-2',
              'uid': 'ebfd063c-02c7-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'k8s.gcr.io/tf-dis:4.0',
                          'image_pull_policy': 'IfNotPresent',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-2106932e-02c8-11e9-9e3e-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:31:14,903 INFO disTf.py:34 start ...
2018-12-19 20:31:14,905 INFO disTf.py:25 service start ...
2018-12-19 20:31:39,696 INFO post_handler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n           \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-19 20:31:39,696 INFO post_handler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-19 20:31:39,711 INFO post_handler.py:62 ps: ['tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-ps-0-1:2222']
2018-12-19 20:31:39,712 INFO post_handler.py:64 worker: ['tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-0-2:2222', 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-1-2:2222']
2018-12-19 20:31:39,740 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 30, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-ps-0-1'},
              'name': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9335967',
              'self_link': '/api/v1/namespaces/default/pods/tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-ps-0-1',
              'uid': 'd3d24c60-0389-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:31:39,814 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 30, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-0-2'},
              'name': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9335969',
              'self_link': '/api/v1/namespaces/default/pods/tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-0-2',
              'uid': 'd3d46e28-0389-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:31:39,831 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 30, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-1-2'},
              'name': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9335973',
              'self_link': '/api/v1/namespaces/default/pods/tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-1-2',
              'uid': 'd3dfc872-0389-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-08a5c0f4-038a-11e9-aa30-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:32:08,472 INFO post_handler.py:96 POST data: b'    {\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2\r\n           \r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-19 20:32:08,472 INFO post_handler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-19 20:32:08,482 INFO post_handler.py:62 ps: ['tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-ps-0-1:2222']
2018-12-19 20:32:08,482 INFO post_handler.py:64 worker: ['tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-0-2:2222', 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-1-2:2222']
2018-12-19 20:32:08,508 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 30, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-ps-0-1'},
              'name': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9336040',
              'self_link': '/api/v1/namespaces/default/pods/tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-ps-0-1',
              'uid': 'e4f8410d-0389-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:32:08,540 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 30, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-0-2'},
              'name': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9336042',
              'self_link': '/api/v1/namespaces/default/pods/tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-0-2',
              'uid': 'e4fa42a9-0389-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:32:08,565 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 30, 39, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-1-2'},
              'name': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9336044',
              'self_link': '/api/v1/namespaces/default/pods/tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-1-2',
              'uid': 'e4ff3eb9-0389-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-19cc9f66-038a-11e9-895f-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:34:03,919 INFO disTf.py:34 start ...
2018-12-19 20:34:03,921 INFO disTf.py:25 service start ...
2018-12-19 20:34:36,976 INFO disTf.py:34 start ...
2018-12-19 20:34:36,979 INFO disTf.py:25 service start ...
2018-12-19 20:35:48,945 INFO post_handler.py:96 POST data: b'{\r\n        "type": "tensorflow",\r\n        "version": "1.5.0",\r\n        "mode": "cluster",\r\n        "resource": {\r\n            "cpu": 2,\r\n            "mem": "4g",\r\n            "gpu": 1\r\n        },\r\n        "detail": {\r\n            "ps": 1,\r\n            "worker": 2,\r\n            "chief":1\r\n        },\r\n        "api":{\r\n            "level":1\r\n        },\r\n        "python":"3.6",\r\n        "tf":"1.12.0"\r\n    }'
2018-12-19 20:35:48,945 INFO post_handler.py:99 parse data: {'type': 'tensorflow', 'version': '1.5.0', 'mode': 'cluster', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2, 'chief': 1}, 'api': {'level': 1}, 'python': '3.6', 'tf': '1.12.0'}
2018-12-19 20:35:48,961 INFO post_handler.py:62 ps: ['tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-ps-0-1:2222']
2018-12-19 20:35:48,961 INFO post_handler.py:64 worker: ['tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-0-2:2222', 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-1-2:2222']
2018-12-19 20:35:48,990 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 34, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-ps-0-1'},
              'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9336443',
              'self_link': '/api/v1/namespaces/default/pods/tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-ps-0-1',
              'uid': '686303f7-038a-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-ps-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:35:49,045 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 34, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-0-2'},
              'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9336445',
              'self_link': '/api/v1/namespaces/default/pods/tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-0-2',
              'uid': '68653ee4-038a-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-0-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:35:49,079 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 34, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-1-2'},
              'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9336449',
              'self_link': '/api/v1/namespaces/default/pods/tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-1-2',
              'uid': '686ddfa2-038a-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-worker-1-2',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-19 20:35:49,113 INFO post_handler.py:74 create pod: {'api_version': 'v1',
 'kind': 'Pod',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 19, 12, 34, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'tf': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-chief-0-1'},
              'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-chief-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9336453',
              'self_link': '/api/v1/namespaces/default/pods/tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-chief-0-1',
              'uid': '6872fb1d-038a-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'affinity': None,
          'automount_service_account_token': None,
          'containers': [{'args': None,
                          'command': None,
                          'env': None,
                          'env_from': None,
                          'image': 'tensorflow/tensorflow',
                          'image_pull_policy': 'Always',
                          'lifecycle': None,
                          'liveness_probe': None,
                          'name': 'tf-9d36298a-038a-11e9-9a8e-54e1ad5a0176-chief-0-1',
                          'ports': [{'container_port': 2222,
                                     'host_ip': None,
                                     'host_port': None,
                                     'name': None,
                                     'protocol': 'TCP'}],
                          'readiness_probe': None,
                          'resources': {'limits': None, 'requests': None},
                          'security_context': None,
                          'stdin': None,
                          'stdin_once': None,
                          'termination_message_path': '/dev/termination-log',
                          'termination_message_policy': 'File',
                          'tty': None,
                          'volume_devices': None,
                          'volume_mounts': [{'mount_path': '/var/run/secrets/kubernetes.io/serviceaccount',
                                             'mount_propagation': None,
                                             'name': 'default-token-zpqvx',
                                             'read_only': True,
                                             'sub_path': None}],
                          'working_dir': None}],
          'dns_config': None,
          'dns_policy': 'ClusterFirst',
          'host_aliases': None,
          'host_ipc': None,
          'host_network': None,
          'host_pid': None,
          'hostname': None,
          'image_pull_secrets': None,
          'init_containers': None,
          'node_name': None,
          'node_selector': None,
          'priority': None,
          'priority_class_name': None,
          'readiness_gates': None,
          'restart_policy': 'Always',
          'scheduler_name': 'default-scheduler',
          'security_context': {'fs_group': None,
                               'run_as_group': None,
                               'run_as_non_root': None,
                               'run_as_user': None,
                               'se_linux_options': None,
                               'supplemental_groups': None,
                               'sysctls': None},
          'service_account': 'default',
          'service_account_name': 'default',
          'share_process_namespace': None,
          'subdomain': None,
          'termination_grace_period_seconds': 30,
          'tolerations': [{'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/not-ready',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None},
                          {'effect': 'NoExecute',
                           'key': 'node.kubernetes.io/unreachable',
                           'operator': 'Exists',
                           'toleration_seconds': 300,
                           'value': None}],
          'volumes': [{'aws_elastic_block_store': None,
                       'azure_disk': None,
                       'azure_file': None,
                       'cephfs': None,
                       'cinder': None,
                       'config_map': None,
                       'downward_api': None,
                       'empty_dir': None,
                       'fc': None,
                       'flex_volume': None,
                       'flocker': None,
                       'gce_persistent_disk': None,
                       'git_repo': None,
                       'glusterfs': None,
                       'host_path': None,
                       'iscsi': None,
                       'name': 'default-token-zpqvx',
                       'nfs': None,
                       'persistent_volume_claim': None,
                       'photon_persistent_disk': None,
                       'portworx_volume': None,
                       'projected': None,
                       'quobyte': None,
                       'rbd': None,
                       'scale_io': None,
                       'secret': {'default_mode': 420,
                                  'items': None,
                                  'optional': None,
                                  'secret_name': 'default-token-zpqvx'},
                       'storageos': None,
                       'vsphere_volume': None}]},
 'status': {'conditions': None,
            'container_statuses': None,
            'host_ip': None,
            'init_container_statuses': None,
            'message': None,
            'nominated_node_name': None,
            'phase': 'Pending',
            'pod_ip': None,
            'qos_class': 'BestEffort',
            'reason': None,
            'start_time': None}}
2018-12-21 10:52:37,725 INFO disTf.py:32 start ...
2018-12-21 10:52:37,727 INFO disTf.py:23 service start ...
2018-12-21 10:54:03,572 INFO train_handler.py:143 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2018-12-21 10:54:03,572 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-12-21 10:54:03,592 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-21 10:54:03,632 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 21, 2, 52, 35, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9570859',
              'self_link': '/api/v1/namespaces/default/services/tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
              'uid': '7878749a-04cb-11e9-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-21 10:54:03,635 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-21 10:54:03,643 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 21, 2, 52, 35, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9570861',
              'self_link': '/api/v1/namespaces/default/services/tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
              'uid': '787c899b-04cb-11e9-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-21 10:54:03,645 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-12-21 10:54:03,651 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 21, 2, 52, 35, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9570863',
              'self_link': '/api/v1/namespaces/default/services/tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
              'uid': '787e1759-04cb-11e9-8c08-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-12-21 10:54:03,693 INFO train_handler.py:103 ps: ['tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1:2222']
2018-12-21 10:54:03,693 INFO train_handler.py:105 worker: ['tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2:2222', 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2:2222']
2018-12-21 10:54:03,716 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 21, 2, 52, 35, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7887a003-04cb-11e9-8c08-6c92bf52b97e',
                         'job-name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1'},
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9570865',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
              'uid': '7887a003-04cb-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7887a003-04cb-11e9-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7887a003-04cb-11e9-8c08-6c92bf52b97e',
                                               'job-name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2:2222,tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-21 10:54:03,785 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 21, 2, 52, 35, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '788a68e3-04cb-11e9-8c08-6c92bf52b97e',
                         'job-name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2'},
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9570870',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
              'uid': '788a68e3-04cb-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '788a68e3-04cb-11e9-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '788a68e3-04cb-11e9-8c08-6c92bf52b97e',
                                               'job-name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2:2222,tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-12-21 10:54:03,818 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 12, 21, 2, 52, 35, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '7894ff57-04cb-11e9-8c08-6c92bf52b97e',
                         'job-name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2'},
              'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '9570875',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
              'uid': '7894ff57-04cb-11e9-8c08-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '7894ff57-04cb-11e9-8c08-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '7894ff57-04cb-11e9-8c08-6c92bf52b97e',
                                               'job-name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-0-2:2222,tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-acd08234-04cb-11e9-9c62-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:43:21,785 INFO disTf.py:32 start ...
2019-01-03 15:43:46,094 INFO disTf.py:32 start ...
2019-01-03 15:43:46,102 INFO disTf.py:23 service start ...
2019-01-03 15:43:51,477 INFO train_handler.py:143 POST data: b'{\n    "type": "tensorflow",\n    "file": "/test/code/mnist.tgz",\n    "data": "/MNIST_data",\n    "resource": {\n        "cpu": 2,\n        "mem": "4g",\n        \n        "gpu": 1\n    },\n    "detail": {\n        "ps": 1,\n        "worker": 2\n    }\n}\n'
2019-01-03 15:43:51,477 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2019-01-03 15:43:51,518 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:43:51,597 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 42, 17, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10648260',
              'self_link': '/api/v1/namespaces/default/services/tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
              'uid': '181e082b-0f2b-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:43:51,599 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:43:51,610 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 42, 17, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10648262',
              'self_link': '/api/v1/namespaces/default/services/tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
              'uid': '181fb28e-0f2b-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:43:51,612 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:43:51,626 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 42, 17, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10648264',
              'self_link': '/api/v1/namespaces/default/services/tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
              'uid': '1821a7c3-0f2b-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:43:51,722 INFO train_handler.py:103 ps: ['tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1:2222']
2019-01-03 15:43:51,722 INFO train_handler.py:105 worker: ['tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2:2222', 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2:2222']
2019-01-03 15:43:51,753 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 42, 17, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '18356c88-0f2b-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1'},
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10648266',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
              'uid': '18356c88-0f2b-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '18356c88-0f2b-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '18356c88-0f2b-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2:2222,tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:43:51,769 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 42, 17, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '1837f38d-0f2b-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
                         'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2'},
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10648267',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
              'uid': '1837f38d-0f2b-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '1837f38d-0f2b-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '1837f38d-0f2b-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
                                               'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2'},
                                    'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2:2222,tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:43:51,796 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 42, 17, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '183a2b31-0f2b-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
                         'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2'},
              'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10648271',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
              'uid': '183a2b31-0f2b-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '183a2b31-0f2b-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '183a2b31-0f2b-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
                                               'tf': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2'},
                                    'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-0-2:2222,tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-502ef05a-0f2b-11e9-a385-54e1ad5a0176-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:51:15,628 INFO disTf.py:32 start ...
2019-01-03 15:51:15,630 INFO disTf.py:23 service start ...
2019-01-03 15:51:25,860 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-03 15:51:25,860 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-03 15:51:25,880 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:51:25,973 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649239',
              'self_link': '/api/v1/namespaces/default/services/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
              'uid': '26eec815-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:51:25,975 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:51:25,980 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649241',
              'self_link': '/api/v1/namespaces/default/services/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
              'uid': '26f454de-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:51:25,982 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:51:25,990 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649243',
              'self_link': '/api/v1/namespaces/default/services/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
              'uid': '26f560a0-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:51:25,992 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:51:25,999 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649245',
              'self_link': '/api/v1/namespaces/default/services/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
              'uid': '26f6fdbe-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:51:26,083 INFO train_handler.py:103 ps: ['tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1:2222']
2019-01-03 15:51:26,083 INFO train_handler.py:105 worker: ['tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3:2222', 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3:2222', 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3:2222']
2019-01-03 15:51:26,115 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '2707d6ba-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1'},
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649247',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
              'uid': '2707d6ba-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '2707d6ba-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '2707d6ba-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:51:26,139 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '270a6edc-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3'},
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649248',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
              'uid': '270a6edc-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '270a6edc-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '270a6edc-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:51:26,193 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '270ed84f-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3'},
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649252',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
              'uid': '270ed84f-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '270ed84f-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '270ed84f-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:51:26,212 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 49, 52, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '2716861e-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3'},
              'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10649257',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
              'uid': '2716861e-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '2716861e-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '2716861e-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-0-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-1-3:2222,tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5f044b98-0f2c-11e9-9c54-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:56:57,028 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-03 15:56:57,029 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-03 15:56:57,040 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:56:57,062 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650018',
              'self_link': '/api/v1/namespaces/default/services/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
              'uid': 'ec4b8e51-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:56:57,064 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:56:57,069 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650019',
              'self_link': '/api/v1/namespaces/default/services/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
              'uid': 'ec4cfad4-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:56:57,071 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:56:57,084 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650022',
              'self_link': '/api/v1/namespaces/default/services/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
              'uid': 'ec4e1592-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:56:57,086 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-03 15:56:57,108 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650024',
              'self_link': '/api/v1/namespaces/default/services/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
              'uid': 'ec504737-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-03 15:56:57,141 INFO train_handler.py:103 ps: ['tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1:2222']
2019-01-03 15:56:57,141 INFO train_handler.py:105 worker: ['tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3:2222', 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3:2222', 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3:2222']
2019-01-03 15:56:57,219 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ec5c14f3-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1'},
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650026',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
              'uid': 'ec5c14f3-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ec5c14f3-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ec5c14f3-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:56:57,251 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 23, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ec660519-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3'},
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650029',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
              'uid': 'ec660519-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ec660519-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ec660519-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:56:57,281 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 23, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ec6a389b-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3'},
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650036',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
              'uid': 'ec6a389b-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ec6a389b-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ec6a389b-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-03 15:56:57,304 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 3, 7, 55, 23, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ec6f83a8-0f2c-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3'},
              'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10650040',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
              'uid': 'ec6f83a8-0f2c-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ec6f83a8-0f2c-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ec6f83a8-0f2c-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-0-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-1-3:2222,tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-2468ad22-0f2d-11e9-bb61-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:48:36,695 INFO disTf.py:32 start ...
2019-01-04 14:48:36,697 INFO disTf.py:23 service start ...
2019-01-04 14:48:40,446 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-04 14:48:40,446 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-04 14:48:40,462 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:48:40,486 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 6, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794823',
              'self_link': '/api/v1/namespaces/default/services/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
              'uid': '8d4c1a9c-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:48:40,488 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:48:40,493 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 6, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794824',
              'self_link': '/api/v1/namespaces/default/services/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
              'uid': '8d4db83b-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:48:40,495 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:48:40,508 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 6, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794827',
              'self_link': '/api/v1/namespaces/default/services/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
              'uid': '8d4ed6da-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:48:40,511 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:48:40,516 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 6, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794829',
              'self_link': '/api/v1/namespaces/default/services/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
              'uid': '8d5113b9-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:48:40,564 INFO train_handler.py:103 ps: ['tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1:2222']
2019-01-04 14:48:40,564 INFO train_handler.py:105 worker: ['tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3:2222', 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3:2222', 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3:2222']
2019-01-04 14:48:40,631 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 6, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '8d5c0c5d-0fec-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1'},
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794832',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
              'uid': '8d5c0c5d-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '8d5c0c5d-0fec-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '8d5c0c5d-0fec-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:48:40,666 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '8d6439f0-0fec-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3'},
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794835',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
              'uid': '8d6439f0-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '8d6439f0-0fec-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '8d6439f0-0fec-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:48:40,697 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '8d6a0f15-0fec-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3'},
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794842',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
              'uid': '8d6a0f15-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '8d6a0f15-0fec-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '8d6a0f15-0fec-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:48:40,726 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 47, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '8d6efc38-0fec-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3'},
              'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10794846',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
              'uid': '8d6efc38-0fec-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '8d6efc38-0fec-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '8d6efc38-0fec-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-0-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-1-3:2222,tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c5116f74-0fec-11e9-86d8-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:57:02,959 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-04 14:57:02,959 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-04 14:57:02,970 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:57:02,991 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796028',
              'self_link': '/api/v1/namespaces/default/services/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
              'uid': 'b8d11802-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:57:02,993 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:57:03,001 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796029',
              'self_link': '/api/v1/namespaces/default/services/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
              'uid': 'b8d27c8c-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:57:03,003 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:57:03,009 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796030',
              'self_link': '/api/v1/namespaces/default/services/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
              'uid': 'b8d3eb62-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:57:03,010 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 14:57:03,017 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796033',
              'self_link': '/api/v1/namespaces/default/services/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
              'uid': 'b8d51e91-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 14:57:03,072 INFO train_handler.py:103 ps: ['tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1:2222']
2019-01-04 14:57:03,072 INFO train_handler.py:105 worker: ['tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3:2222', 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3:2222', 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3:2222']
2019-01-04 14:57:03,104 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'b8e1892c-0fed-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1'},
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796036',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
              'uid': 'b8e1892c-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'b8e1892c-0fed-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'b8e1892c-0fed-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:57:03,140 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'b8e45166-0fed-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3'},
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796038',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
              'uid': 'b8e45166-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'b8e45166-0fed-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'b8e45166-0fed-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:57:03,178 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'b8e9b6a9-0fed-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3'},
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796045',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
              'uid': 'b8e9b6a9-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'b8e9b6a9-0fed-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'b8e9b6a9-0fed-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 14:57:03,243 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 55, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'b8effb44-0fed-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3'},
              'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796049',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
              'uid': 'b8effb44-0fed-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'b8effb44-0fed-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'b8effb44-0fed-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-0-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-1-3:2222,tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-f096df34-0fed-11e9-b419-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:00:34,990 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-04 15:00:34,990 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-04 15:00:35,000 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:00:35,025 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796671',
              'self_link': '/api/v1/namespaces/default/services/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
              'uid': '3732f08f-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:00:35,026 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:00:35,032 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796672',
              'self_link': '/api/v1/namespaces/default/services/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
              'uid': '37346dec-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:00:35,034 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:00:35,040 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796673',
              'self_link': '/api/v1/namespaces/default/services/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
              'uid': '37359aa4-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:00:35,041 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:00:35,048 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796676',
              'self_link': '/api/v1/namespaces/default/services/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
              'uid': '3736a5ca-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:00:35,103 INFO train_handler.py:103 ps: ['tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1:2222']
2019-01-04 15:00:35,103 INFO train_handler.py:105 worker: ['tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3:2222', 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3:2222', 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3:2222']
2019-01-04 15:00:35,132 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '3742ad3f-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1'},
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796680',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
              'uid': '3742ad3f-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '3742ad3f-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '3742ad3f-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:00:35,161 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '37452e63-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3'},
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796683',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
              'uid': '37452e63-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '37452e63-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '37452e63-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:00:35,191 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '37499fc2-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3'},
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796690',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
              'uid': '37499fc2-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '37499fc2-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '37499fc2-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:00:35,272 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 6, 59, 1, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '374e5ef4-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3'},
              'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796694',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
              'uid': '374e5ef4-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '374e5ef4-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '374e5ef4-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-0-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-1-3:2222,tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-6ef8320a-0fee-11e9-9468-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:01:51,582 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-04 15:01:51,582 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-04 15:01:51,592 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:01:51,641 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796992',
              'self_link': '/api/v1/namespaces/default/services/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
              'uid': '64da626f-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:01:51,648 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:01:51,655 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796994',
              'self_link': '/api/v1/namespaces/default/services/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
              'uid': '64e04cf8-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:01:51,657 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:01:51,669 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796996',
              'self_link': '/api/v1/namespaces/default/services/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
              'uid': '64e174a8-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:01:51,671 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:01:51,682 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10796998',
              'self_link': '/api/v1/namespaces/default/services/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
              'uid': '64e3802b-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:01:51,696 INFO train_handler.py:103 ps: ['tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1:2222']
2019-01-04 15:01:51,696 INFO train_handler.py:105 worker: ['tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3:2222', 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3:2222', 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3:2222']
2019-01-04 15:01:51,725 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '64ea083b-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1'},
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10797000',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
              'uid': '64ea083b-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '64ea083b-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '64ea083b-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:01:51,743 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '64ec7f53-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3'},
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10797001',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
              'uid': '64ec7f53-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '64ec7f53-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '64ec7f53-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:01:51,780 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '64ef4bc6-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3'},
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10797005',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
              'uid': '64ef4bc6-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '64ef4bc6-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '64ef4bc6-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:01:51,805 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 0, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '64f50ac4-0fee-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3'},
              'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10797012',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
              'uid': '64f50ac4-0fee-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '64f50ac4-0fee-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '64f50ac4-0fee-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-0-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-1-3:2222,tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9c9f468c-0fee-11e9-b84f-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:16:08,094 INFO disTf.py:32 start ...
2019-01-04 15:16:08,096 INFO disTf.py:23 service start ...
2019-01-04 15:16:11,101 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-04 15:16:11,101 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-04 15:16:11,118 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:16:11,143 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799048',
              'self_link': '/api/v1/namespaces/default/services/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
              'uid': '652c40cb-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:16:11,144 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:16:11,150 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799049',
              'self_link': '/api/v1/namespaces/default/services/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
              'uid': '652dc99f-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:16:11,151 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:16:11,156 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799050',
              'self_link': '/api/v1/namespaces/default/services/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
              'uid': '652ed1e4-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:16:11,158 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-04 15:16:11,165 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799053',
              'self_link': '/api/v1/namespaces/default/services/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
              'uid': '652fd5b8-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-04 15:16:11,219 INFO train_handler.py:103 ps: ['tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1:2222']
2019-01-04 15:16:11,219 INFO train_handler.py:105 worker: ['tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3:2222', 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3:2222', 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3:2222']
2019-01-04 15:16:11,267 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '653c13ae-0ff0-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1'},
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799056',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
              'uid': '653c13ae-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '653c13ae-0ff0-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '653c13ae-0ff0-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:16:11,293 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '654138fb-0ff0-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3'},
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799059',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
              'uid': '654138fb-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '654138fb-0ff0-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '654138fb-0ff0-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:16:11,330 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '6545e487-0ff0-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3'},
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799065',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
              'uid': '6545e487-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '6545e487-0ff0-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '6545e487-0ff0-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-04 15:16:11,360 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 4, 7, 14, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '654aef9a-0ff0-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3'},
              'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '10799072',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
              'uid': '654aef9a-0ff0-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '654aef9a-0ff0-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '654aef9a-0ff0-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-0-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-1-3:2222,tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-9cef75e8-0ff0-11e9-b212-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-05 11:38:00,775 INFO disTf.py:32 start ...
2019-01-05 11:38:00,778 INFO disTf.py:23 service start ...
2019-01-08 12:30:34,199 INFO disTf.py:32 start ...
2019-01-08 12:30:34,203 INFO disTf.py:23 service start ...
2019-01-08 12:30:57,954 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/test/code/mnist.tgz",\r\n    "data": "/MNIST_data",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 3\r\n    }\r\n}\r\n'
2019-01-08 12:30:57,954 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': '/test/code/mnist.tgz', 'data': '/MNIST_data', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 3}}
2019-01-08 12:30:57,995 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-08 12:30:58,086 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416533',
              'self_link': '/api/v1/namespaces/default/services/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
              'uid': 'fb93b3fb-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-08 12:30:58,088 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-08 12:30:58,113 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416535',
              'self_link': '/api/v1/namespaces/default/services/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
              'uid': 'fb95c69b-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-08 12:30:58,115 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-08 12:30:58,128 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416537',
              'self_link': '/api/v1/namespaces/default/services/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
              'uid': 'fb9a0772-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-08 12:30:58,130 INFO train_handler.py:50 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2019-01-08 12:30:58,137 INFO train_handler.py:55 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416539',
              'self_link': '/api/v1/namespaces/default/services/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
              'uid': 'fb9c2d5c-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2019-01-08 12:30:58,198 INFO train_handler.py:103 ps: ['tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1:2222']
2019-01-08 12:30:58,199 INFO train_handler.py:105 worker: ['tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3:2222', 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3:2222', 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3:2222']
2019-01-08 12:30:58,237 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'fbaa36ec-12fd-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
                         'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1'},
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416542',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
              'uid': 'fbaa36ec-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'fbaa36ec-12fd-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'fbaa36ec-12fd-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
                                               'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1'},
                                    'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-08 12:30:58,256 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'fbad2349-12fd-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
                         'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3'},
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416543',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
              'uid': 'fbad2349-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'fbad2349-12fd-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'fbad2349-12fd-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
                                               'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3'},
                                    'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-08 12:30:58,292 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'fbb018d7-12fd-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
                         'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3'},
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416547',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
              'uid': 'fbb018d7-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'fbb018d7-12fd-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'fbb018d7-12fd-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
                                               'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3'},
                                    'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2019-01-08 12:30:58,329 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2019, 1, 8, 4, 29, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'fbb60b37-12fd-11e9-97a3-6c92bf52b97e',
                         'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
                         'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3'},
              'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '11416552',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
              'uid': 'fbb60b37-12fd-11e9-97a3-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'fbb60b37-12fd-11e9-97a3-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'fbb60b37-12fd-11e9-97a3-6c92bf52b97e',
                                               'job-name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
                                               'tf': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3'},
                                    'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '2',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-ps-0-1:2222',
                                                            'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-0-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-1-3:2222,tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3:2222',
                                                            '/test/code/mnist.tgz',
                                                            '/MNIST_data',
                                                            '/tmp',
                                                            'http://192.168.0.55:14000',
                                                            'hdfs://192.168.0.55'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'k8s.gcr.io/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-31e44f00-12fe-11e9-95f8-54e1ad5a0176-worker-2-3',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'runtime_class_name': None,
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}},
          'ttl_seconds_after_finished': None},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
